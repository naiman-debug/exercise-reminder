# å¥åº·æé†’åŠ©æ‰‹ - æŠ€æœ¯æ–¹æ¡ˆæ–‡æ¡£

## æ–‡æ¡£ä¿¡æ¯

| é¡¹ç›®åç§° | å¥åº·æé†’åŠ©æ‰‹ |
|---------|------------|
| æ–‡æ¡£ç‰ˆæœ¬ | v1.0 |
| åˆ›å»ºæ—¥æœŸ | 2026-01-28 |
| å¼€å‘å·¥å…· | Claude Code (CC) |
| ç›®æ ‡å¹³å° | Windows 10/11 Desktop |

---

## ğŸ“‹ ç›®å½•

1. [æŠ€æœ¯æ ˆé€‰å‹](#1-æŠ€æœ¯æ ˆé€‰å‹)
2. [é¡¹ç›®æ¶æ„è®¾è®¡](#2-é¡¹ç›®æ¶æ„è®¾è®¡)
3. [CCæŠ€èƒ½æ˜ å°„è¡¨](#3-ccæŠ€èƒ½æ˜ å°„è¡¨)
4. [å¼€å‘å·¥ä½œæµ](#4-å¼€å‘å·¥ä½œæµ)
5. [æ ¸å¿ƒåŠŸèƒ½å®ç°æ–¹æ¡ˆ](#5-æ ¸å¿ƒåŠŸèƒ½å®ç°æ–¹æ¡ˆ)
6. [æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ](#6-æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ)
7. [æ„å»ºä¸éƒ¨ç½²](#7-æ„å»ºä¸éƒ¨ç½²)
8. [å¼€å‘æ—¶é—´ä¼°ç®—](#8-å¼€å‘æ—¶é—´ä¼°ç®—)

---

## 1. æŠ€æœ¯æ ˆé€‰å‹

### 1.1 æœ€ç»ˆæŠ€æœ¯æ ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ¡Œé¢åº”ç”¨æ¡†æ¶ï¼šElectron 33+        â”‚
â”‚    (Chromium + Node.js)             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    å‰ç«¯æ¡†æ¶ï¼šReact 18                â”‚
â”‚    ç±»å‹ç³»ç»Ÿï¼šTypeScript 5            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    UIæ¡†æ¶ï¼šTailwind CSS 3           â”‚
â”‚    ç»„ä»¶åº“ï¼šHeadless UI (å¯é€‰)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    çŠ¶æ€ç®¡ç†ï¼šZustand                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ•°æ®å­˜å‚¨ï¼šSQLite (better-sqlite3)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    æ„å»ºå·¥å…·ï¼šVite 5                 â”‚
â”‚    æ‰“åŒ…å·¥å…·ï¼šelectron-builder       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 1.2 æŠ€æœ¯é€‰å‹ç†ç”±

| æŠ€æœ¯ | é€‰æ‹©ç†ç”± | æ€§èƒ½æŒ‡æ ‡ |
|------|---------|----------|
| **Electron** | 1. é…åˆCCçš„frontend-designæ’ä»¶æ•ˆæœæœ€å¥½<br>2. ç”Ÿæ€æˆç†Ÿï¼Œå¼€å‘æ•ˆç‡é«˜<br>3. è·¨è¿›ç¨‹é€šä¿¡ç®€å• | å†…å­˜ï¼š60-80MB<br>å¯åŠ¨ï¼š1-1.5ç§’ |
| **React + TypeScript** | 1. CCçš„feature-devæ”¯æŒæœ€å¥½<br>2. ç»„ä»¶åŒ–å¼€å‘é€‚åˆå¤šçª—å£<br>3. TypeScripté…åˆHooksè‡ªåŠ¨ç±»å‹æ£€æŸ¥ | ç±»å‹å®‰å…¨âœ…<br>è‡ªåŠ¨æ ¼å¼åŒ–âœ… |
| **Tailwind CSS** | 1. å®Œå…¨è‡ªå®šä¹‰ï¼Œç¬¦åˆPRDçš„æ— è¾¹æ¡†ã€ç»¿è‰²æ¸©å’Œé£æ ¼<br>2. frontend-designç”Ÿæˆä»£ç è´¨é‡é«˜<br>3. æŒ‰éœ€æ‰“åŒ…ï¼Œä½“ç§¯å° | CSSä½“ç§¯ï¼š~10KB |
| **Zustand** | 1. APIæç®€ï¼Œå­¦ä¹ æˆæœ¬ä½<br>2. æ€§èƒ½ä¼˜ç§€ï¼Œé¿å…è¿‡åº¦æ¸²æŸ“<br>3. TypeScriptæ”¯æŒå®Œå–„ | çŠ¶æ€ç®¡ç†âœ… |
| **SQLite** | 1. é›¶é…ç½®ï¼Œå•æ–‡ä»¶æ•°æ®åº“<br>2. åŒæ­¥APIï¼Œä»£ç ç®€å•<br>3. æŸ¥è¯¢æ€§èƒ½ä¼˜ç§€ | è¯»å†™ï¼š<1ms |
| **Vite** | 1. æ„å»ºé€Ÿåº¦å¿«ï¼ˆæ¯”Webpackå¿«10å€ï¼‰<br>2. HMRå¿«é€Ÿåˆ·æ–°<br>3. å¤©ç„¶æ”¯æŒTypeScript | æ„å»ºï¼š<10ç§’ |

### 1.3 ä¾èµ–åŒ…æ¸…å•

```json
{
  "dependencies": {
    "react": "^18.3.1",
    "react-dom": "^18.3.1",
    "zustand": "^4.5.0",
    "better-sqlite3": "^11.0.0",
    "auto-launch": "^5.0.6"
  },
  "devDependencies": {
    "@types/react": "^18.3.0",
    "@types/react-dom": "^18.3.0",
    "@types/better-sqlite3": "^7.6.9",
    "typescript": "^5.4.0",
    "vite": "^5.2.0",
    "electron": "^33.0.0",
    "electron-builder": "^24.13.0",
    "tailwindcss": "^3.4.0",
    "autoprefixer": "^10.4.0",
    "postcss": "^8.4.0"
  }
}
```

---

## 2. é¡¹ç›®æ¶æ„è®¾è®¡

### 2.1 é¡¹ç›®ç›®å½•ç»“æ„

```
å¥åº·æé†’åŠ©æ‰‹/
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ vite.config.ts
â”œâ”€â”€ tailwind.config.js
â”œâ”€â”€ electron-builder.yml
â”œâ”€â”€ .claude/                      # CCé…ç½®
â”‚   â”œâ”€â”€ skills/
â”‚   â”œâ”€â”€ agents/
â”‚   â””â”€â”€ settings.json
â”œâ”€â”€ docs/                         # æ–‡æ¡£
â”‚   â”œâ”€â”€ PRD.md
â”‚   â”œâ”€â”€ æŠ€æœ¯æ–¹æ¡ˆ.md
â”‚   â””â”€â”€ APIæ–‡æ¡£.md
â”œâ”€â”€ electron/                     # Electronä¸»è¿›ç¨‹
â”‚   â”œâ”€â”€ main.ts                  # ä¸»è¿›ç¨‹å…¥å£
â”‚   â”œâ”€â”€ preload.ts               # é¢„åŠ è½½è„šæœ¬
â”‚   â”œâ”€â”€ ipc/                     # IPCé€šä¿¡
â”‚   â”‚   â”œâ”€â”€ handlers.ts
â”‚   â”‚   â””â”€â”€ channels.ts
â”‚   â”œâ”€â”€ database/                # æ•°æ®åº“
â”‚   â”‚   â”œâ”€â”€ db.ts               # æ•°æ®åº“è¿æ¥
â”‚   â”‚   â”œâ”€â”€ schema.ts           # è¡¨ç»“æ„
â”‚   â”‚   â””â”€â”€ queries.ts          # æŸ¥è¯¢æ–¹æ³•
â”‚   â”œâ”€â”€ reminder/                # æé†’é€»è¾‘
â”‚   â”‚   â”œâ”€â”€ scheduler.ts        # å®šæ—¶å™¨è°ƒåº¦
â”‚   â”‚   â”œâ”€â”€ timer-manager.ts    # å®šæ—¶å™¨ç®¡ç†
â”‚   â”‚   â””â”€â”€ reminder-types.ts   # æé†’ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ tray/                    # ç³»ç»Ÿæ‰˜ç›˜
â”‚   â”‚   â””â”€â”€ tray-manager.ts
â”‚   â”œâ”€â”€ window/                  # çª—å£ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ main-window.ts
â”‚   â”‚   â”œâ”€â”€ reminder-window.ts
â”‚   â”‚   â””â”€â”€ settings-window.ts
â”‚   â””â”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚       â”œâ”€â”€ auto-launch.ts
â”‚       â””â”€â”€ logger.ts
â”œâ”€â”€ src/                         # Reactå‰ç«¯
â”‚   â”œâ”€â”€ main.tsx                # å‰ç«¯å…¥å£
â”‚   â”œâ”€â”€ App.tsx                 # ä¸»åº”ç”¨
â”‚   â”œâ”€â”€ store/                  # ZustandçŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ useStore.ts        # å…¨å±€çŠ¶æ€
â”‚   â”‚   â”œâ”€â”€ slices/
â”‚   â”‚   â”‚   â”œâ”€â”€ userSlice.ts
â”‚   â”‚   â”‚   â”œâ”€â”€ reminderSlice.ts
â”‚   â”‚   â”‚   â””â”€â”€ statsSlice.ts
â”‚   â”‚   â””â”€â”€ types.ts
â”‚   â”œâ”€â”€ pages/                  # é¡µé¢
â”‚   â”‚   â”œâ”€â”€ HomePage/          # é¦–é¡µç»Ÿè®¡
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ TodayProgress.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ActivityList.tsx
â”‚   â”‚   â”‚   â””â”€â”€ HistoryStats.tsx
â”‚   â”‚   â”œâ”€â”€ SettingsPage/      # è®¾ç½®é¡µ
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PersonalTab.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ReminderTab.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ExerciseTab.tsx
â”‚   â”‚   â”œâ”€â”€ OnboardingFlow/    # é¦–æ¬¡å¼•å¯¼
â”‚   â”‚   â”‚   â”œâ”€â”€ index.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Step1Personal.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ Step2Settings.tsx
â”‚   â”‚   â”‚   â””â”€â”€ Step3Welcome.tsx
â”‚   â”‚   â””â”€â”€ ReminderWindow/    # æé†’å¼¹çª—
â”‚   â”‚       â”œâ”€â”€ ExerciseReminder.tsx
â”‚   â”‚       â”œâ”€â”€ GazeReminder.tsx
â”‚   â”‚       â””â”€â”€ StandReminder.tsx
â”‚   â”œâ”€â”€ components/            # é€šç”¨ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Button.tsx
â”‚   â”‚   â”œâ”€â”€ Card.tsx
â”‚   â”‚   â”œâ”€â”€ ProgressBar.tsx
â”‚   â”‚   â”œâ”€â”€ Countdown.tsx
â”‚   â”‚   â””â”€â”€ Modal.tsx
â”‚   â”œâ”€â”€ hooks/                 # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â”œâ”€â”€ useCountdown.ts
â”‚   â”‚   â”œâ”€â”€ useDatabase.ts
â”‚   â”‚   â””â”€â”€ useIPC.ts
â”‚   â”œâ”€â”€ utils/                 # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ met-calculator.ts  # METè®¡ç®—
â”‚   â”‚   â”œâ”€â”€ formatters.ts      # æ ¼å¼åŒ–
â”‚   â”‚   â””â”€â”€ validators.ts      # éªŒè¯
â”‚   â”œâ”€â”€ types/                 # TypeScriptç±»å‹
â”‚   â”‚   â”œâ”€â”€ user.ts
â”‚   â”‚   â”œâ”€â”€ reminder.ts
â”‚   â”‚   â”œâ”€â”€ activity.ts
â”‚   â”‚   â””â”€â”€ exercise.ts
â”‚   â”œâ”€â”€ constants/             # å¸¸é‡
â”‚   â”‚   â”œâ”€â”€ exercises.ts       # 15ä¸ªåˆå§‹è¿åŠ¨
â”‚   â”‚   â””â”€â”€ config.ts          # é…ç½®
â”‚   â””â”€â”€ styles/                # å…¨å±€æ ·å¼
â”‚       â””â”€â”€ index.css
â”œâ”€â”€ resources/                 # èµ„æºæ–‡ä»¶
â”‚   â”œâ”€â”€ icons/
â”‚   â”‚   â”œâ”€â”€ icon.png
â”‚   â”‚   â”œâ”€â”€ tray-icon.png
â”‚   â”‚   â””â”€â”€ tray-icon-paused.png
â”‚   â””â”€â”€ sounds/ (å¯é€‰ï¼Œæš‚ä¸å®ç°)
â””â”€â”€ dist/                      # æ„å»ºè¾“å‡º
    â”œâ”€â”€ electron/
    â””â”€â”€ renderer/
```

### 2.2 æ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Electron ä¸»è¿›ç¨‹                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Timer Managerâ”‚  â”‚   Database   â”‚  â”‚   Tray    â”‚ â”‚
â”‚  â”‚              â”‚  â”‚              â”‚  â”‚  Manager  â”‚ â”‚
â”‚  â”‚ - è¿åŠ¨å®šæ—¶å™¨ â”‚  â”‚ - SQLite     â”‚  â”‚           â”‚ â”‚
â”‚  â”‚ - è¿œçœºå®šæ—¶å™¨ â”‚  â”‚ - æ•°æ®æŒä¹…åŒ– â”‚  â”‚ - å³é”®èœå•â”‚ â”‚
â”‚  â”‚ - ç«™ç«‹å®šæ—¶å™¨ â”‚  â”‚ - æŸ¥è¯¢ç»Ÿè®¡   â”‚  â”‚ - æš‚åœçŠ¶æ€â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜ â”‚
â”‚         â”‚                 â”‚                 â”‚       â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                           â”‚                         â”‚
â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚                    â”‚  IPC Bridge  â”‚                 â”‚
â”‚                    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   React æ¸²æŸ“è¿›ç¨‹                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚   Zustand    â”‚  â”‚    Pages     â”‚  â”‚Components â”‚ â”‚
â”‚  â”‚    Store     â”‚  â”‚              â”‚  â”‚           â”‚ â”‚
â”‚  â”‚              â”‚  â”‚ - HomePage   â”‚  â”‚ - Card    â”‚ â”‚
â”‚  â”‚ - userState  â”‚  â”‚ - Settings   â”‚  â”‚ - Button  â”‚ â”‚
â”‚  â”‚ - statsState â”‚  â”‚ - Reminders  â”‚  â”‚ - Countdownâ”‚â”‚â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.3 æ•°æ®æ¨¡å‹è®¾è®¡

#### æ•°æ®åº“è¡¨ç»“æ„

```sql
-- ç”¨æˆ·ä¿¡æ¯è¡¨
CREATE TABLE user_info (
  id INTEGER PRIMARY KEY,
  height REAL NOT NULL,              -- èº«é«˜(cm)
  weight REAL NOT NULL,              -- ä½“é‡(kg)
  age INTEGER NOT NULL,              -- å¹´é¾„
  gender TEXT NOT NULL,              -- æ€§åˆ« (male/female)
  daily_target REAL NOT NULL,        -- æ¯æ—¥ç›®æ ‡(å¤§å¡)
  initial_weight REAL NOT NULL,      -- åˆå§‹ä½“é‡
  created_at TEXT NOT NULL,
  updated_at TEXT NOT NULL
);

-- æé†’è®¾ç½®è¡¨
CREATE TABLE reminder_settings (
  id INTEGER PRIMARY KEY,
  type TEXT NOT NULL,                -- exercise/gaze/stand
  interval_min INTEGER NOT NULL,     -- é—´éš”æœ€å°å€¼(åˆ†é’Ÿ)
  interval_max INTEGER NOT NULL,     -- é—´éš”æœ€å¤§å€¼(åˆ†é’Ÿ)
  duration INTEGER NOT NULL,         -- å•æ¬¡æ—¶é•¿(ç§’)
  enabled INTEGER DEFAULT 1,         -- æ˜¯å¦å¯ç”¨
  updated_at TEXT NOT NULL
);

-- è¿åŠ¨åº“è¡¨
CREATE TABLE exercises (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  name TEXT NOT NULL UNIQUE,         -- è¿åŠ¨åç§°
  met_value REAL NOT NULL,           -- METå€¼
  intensity TEXT NOT NULL,           -- å¼ºåº¦åˆ†ç±»
  created_at TEXT NOT NULL
);

-- æ´»åŠ¨è®°å½•è¡¨
CREATE TABLE activities (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  type TEXT NOT NULL,                -- exercise/gaze/stand
  name TEXT NOT NULL,                -- æ´»åŠ¨åç§°
  duration INTEGER NOT NULL,         -- æ—¶é•¿(ç§’)
  calories REAL,                     -- æ¶ˆè€—å¡è·¯é‡Œ(ä»…è¿åŠ¨)
  met_value REAL,                    -- METå€¼(ä»…è¿åŠ¨)
  weight REAL,                       -- ä½“é‡(è®°å½•æ—¶)
  timestamp TEXT NOT NULL,           -- æ—¶é—´æˆ³
  date TEXT NOT NULL,                -- æ—¥æœŸ (YYYY-MM-DD)
  completed INTEGER DEFAULT 1        -- æ˜¯å¦å®Œæˆ
);

-- æ¯æ—¥ç»Ÿè®¡è¡¨
CREATE TABLE daily_stats (
  id INTEGER PRIMARY KEY AUTOINCREMENT,
  date TEXT NOT NULL UNIQUE,         -- æ—¥æœŸ (YYYY-MM-DD)
  total_calories REAL DEFAULT 0,     -- å½“æ—¥æ€»å¡è·¯é‡Œ
  target_calories REAL NOT NULL,     -- å½“æ—¥ç›®æ ‡
  achieved INTEGER DEFAULT 0,        -- æ˜¯å¦è¾¾æˆ
  achieved_today INTEGER DEFAULT 0,  -- ä»Šæ—¥æ˜¯å¦å·²å¼¹å‡ºè¾¾æˆæç¤º
  exercise_count INTEGER DEFAULT 0,  -- è¿åŠ¨æ¬¡æ•°
  gaze_count INTEGER DEFAULT 0,      -- è¿œçœºæ¬¡æ•°
  stand_count INTEGER DEFAULT 0,     -- ç«™ç«‹æ¬¡æ•°
  weight REAL,                       -- å½“æ—¥ä½“é‡
  streak INTEGER DEFAULT 0           -- è¿ç»­æ‰“å¡å¤©æ•°
);

-- ç³»ç»Ÿè®¾ç½®è¡¨
CREATE TABLE system_settings (
  key TEXT PRIMARY KEY,
  value TEXT NOT NULL,
  updated_at TEXT NOT NULL
);
```

---

## 3. CCæŠ€èƒ½æ˜ å°„è¡¨

### 3.1 å¼€å‘é˜¶æ®µä¸CCæŠ€èƒ½å¯¹åº”

| å¼€å‘é˜¶æ®µ | CCæŠ€èƒ½/æ’ä»¶ | å…·ä½“ç”¨é€” | è¾“å…¥ | è¾“å‡º |
|---------|-----------|---------|------|------|
| **ğŸ¯ æ¶æ„è®¾è®¡** | `architect` Agent | ç³»ç»Ÿæ¶æ„è®¾è®¡ | PRDæ–‡æ¡£ | æ¶æ„æ–¹æ¡ˆã€æ¨¡å—åˆ’åˆ† |
| **ğŸ¨ UIè®¾è®¡** | `frontend-design` æ’ä»¶ | ç”Ÿæˆæ‰€æœ‰UIç»„ä»¶ | ç•Œé¢éœ€æ±‚ | Reactç»„ä»¶ä»£ç  |
| **ğŸ’¡ åŠŸèƒ½è§„åˆ’** | `brainstorming` Skill | åŠŸèƒ½å®ç°æ€è·¯ | åŠŸèƒ½éœ€æ±‚ | å®ç°æ–¹æ¡ˆåˆ—è¡¨ |
| **ğŸ“ ç¼–å†™è®¡åˆ’** | `writing-plans` Skill | è¯¦ç»†å®ç°è®¡åˆ’ | åŠŸèƒ½éœ€æ±‚ | Step-by-stepè®¡åˆ’ |
| **âš¡ å¿«é€Ÿå¼€å‘** | `feature-dev` æ’ä»¶ | å¿«é€Ÿå®ç°åŠŸèƒ½æ¨¡å— | åŠŸèƒ½æè¿° | å®Œæ•´åŠŸèƒ½ä»£ç  |
| **ğŸ”„ æ‰§è¡Œè®¡åˆ’** | `executing-plans` Skill | æŒ‰è®¡åˆ’ç¼–ç  | å®ç°è®¡åˆ’ | ä»£ç å®ç° |
| **ğŸ› è°ƒè¯•ä¿®å¤** | `systematic-debugging` Skill | ç³»ç»ŸåŒ–è°ƒè¯• | Bugæè¿° | ä¿®å¤æ–¹æ¡ˆ |
| **ğŸ”§ æ„å»ºä¿®å¤** | `build-error-resolver` Agent | è§£å†³æ„å»ºé”™è¯¯ | é”™è¯¯ä¿¡æ¯ | ä¿®å¤ä»£ç  |
| **âœ… å®ŒæˆéªŒè¯** | `verification-before-completion` Skill | éªŒè¯åŠŸèƒ½å®Œæ•´æ€§ | åŠŸèƒ½æ¨¡å— | éªŒè¯æŠ¥å‘Š |
| **ğŸ”’ å®‰å…¨å®¡æŸ¥** | `security-reviewer` Agent | å®‰å…¨æ¼æ´æ£€æµ‹ | ä»£ç  | å®‰å…¨å»ºè®® |
| **ğŸ“– ä»£ç å®¡æŸ¥** | `code-review` æ’ä»¶ | ä»£ç è´¨é‡å®¡æŸ¥ | ä»£ç  | æ”¹è¿›å»ºè®® |

### 3.2 è‡ªåŠ¨åŒ–Hooksæ”¯æŒ

| Hookç±»å‹ | è§¦å‘æ—¶æœº | è‡ªåŠ¨åŠŸèƒ½ | å—ç›Šç‚¹ |
|---------|---------|---------|-------|
| **PostToolUse** | æ¯æ¬¡å·¥å…·ä½¿ç”¨å | - è‡ªåŠ¨ä»£ç æ ¼å¼åŒ–<br>- TypeScriptç±»å‹æ£€æŸ¥<br>- ESLintæ£€æŸ¥ | ä¿è¯ä»£ç è´¨é‡ |
| **SessionStart** | ä¼šè¯å¼€å§‹ | - åŠ è½½ä¸Šæ¬¡ä¸Šä¸‹æ–‡<br>- æ¢å¤å·¥ä½œçŠ¶æ€ | æ— ç¼ç»§ç»­å¼€å‘ |
| **SessionEnd** | ä¼šè¯ç»“æŸ | - æŒä¹…åŒ–ä¼šè¯çŠ¶æ€<br>- æå–å¯å¤ç”¨æ¨¡å¼ | ç§¯ç´¯å¼€å‘ç»éªŒ |
| **PreCompact** | ä¸Šä¸‹æ–‡å‹ç¼©å‰ | - ä¿å­˜å…³é”®çŠ¶æ€ | é˜²æ­¢ä¿¡æ¯ä¸¢å¤± |

### 3.3 MCPæœåŠ¡å™¨æ”¯æŒ

| MCPæœåŠ¡ | ç”¨é€” | ä½¿ç”¨åœºæ™¯ |
|---------|------|----------|
| **searxng** | ç½‘ç»œæœç´¢ | æŸ¥è¯¢Electron/Reactæœ€æ–°APIã€Tailwindç”¨æ³• |
| **vision-mcp** | å›¾ç‰‡åˆ†æ | åˆ†æç”¨æˆ·æä¾›çš„ç•Œé¢è®¾è®¡ç¨¿ã€æˆªå›¾ |

---

## 4. å¼€å‘å·¥ä½œæµ

### 4.1 æ€»ä½“å¼€å‘æµç¨‹

```
é˜¶æ®µ0: é¡¹ç›®åˆå§‹åŒ– (1å¤©)
  â†“
é˜¶æ®µ1: æ¶æ„è®¾è®¡ (2å¤©)
  â†“
é˜¶æ®µ2: UIç»„ä»¶å¼€å‘ (3å¤©)
  â†“
é˜¶æ®µ3: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ (5å¤©)
  â†“
é˜¶æ®µ4: æ•°æ®æŒä¹…åŒ– (2å¤©)
  â†“
é˜¶æ®µ5: ç³»ç»Ÿé›†æˆ (2å¤©)
  â†“
é˜¶æ®µ6: æµ‹è¯•ä¼˜åŒ– (2å¤©)
  â†“
é˜¶æ®µ7: æ‰“åŒ…éƒ¨ç½² (1å¤©)
  â†“
æ€»è®¡: 18å¤© (çº¦3å‘¨)
```

### 4.2 é˜¶æ®µ0: é¡¹ç›®åˆå§‹åŒ–

**ğŸ¯ ç›®æ ‡**: æ­å»ºé¡¹ç›®è„šæ‰‹æ¶ï¼Œé…ç½®å¼€å‘ç¯å¢ƒ

**ğŸ¤– CCå·¥ä½œæµ**:
```bash
1. ä½¿ç”¨ feature-dev æ’ä»¶åˆ›å»ºé¡¹ç›®åŸºç¡€ç»“æ„
   - åˆå§‹åŒ– package.json
   - é…ç½® TypeScript
   - é…ç½® Vite
   - é…ç½® Tailwind CSS
   - é…ç½® Electron

2. åˆ›å»ºç›®å½•ç»“æ„
   - electron/ ç›®å½•
   - src/ ç›®å½•
   - èµ„æºæ–‡ä»¶ç›®å½•

3. é…ç½®å¼€å‘è„šæœ¬
   - npm run dev (å¼€å‘æ¨¡å¼)
   - npm run build (æ„å»º)
   - npm run package (æ‰“åŒ…)
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] é¡¹ç›®åŸºç¡€ç»“æ„
- [ ] é…ç½®æ–‡ä»¶é½å…¨
- [ ] å¼€å‘ç¯å¢ƒå¯è¿è¡Œ
- [ ] Gitä»“åº“åˆå§‹åŒ–

---

### 4.3 é˜¶æ®µ1: æ¶æ„è®¾è®¡

**ğŸ¯ ç›®æ ‡**: è®¾è®¡ç³»ç»Ÿæ¶æ„ï¼Œæ˜ç¡®æ¨¡å—èŒè´£

**ğŸ¤– CCå·¥ä½œæµ**:

#### Step 1.1: å¯åŠ¨æ¶æ„è®¾è®¡
```bash
ğŸ¤– ä½¿ç”¨: architect Agent

è¾“å…¥:
- PRDæ–‡æ¡£
- æŠ€æœ¯æ ˆé€‰å‹

è¾“å‡º:
- ç³»ç»Ÿæ¶æ„å›¾
- æ¨¡å—åˆ’åˆ†æ–¹æ¡ˆ
- æ•°æ®æµè®¾è®¡
- IPCé€šä¿¡æ–¹æ¡ˆ
- ä¸‰ä¸ªç‹¬ç«‹å®šæ—¶å™¨çš„å®ç°æ¶æ„
```

#### Step 1.2: è®¾è®¡æ•°æ®æ¨¡å‹
```bash
ğŸ¤– ä½¿ç”¨: brainstorming Skill

è¾“å…¥:
- æ•°æ®ç»Ÿè®¡éœ€æ±‚
- æŸ¥è¯¢åœºæ™¯

è¾“å‡º:
- æ•°æ®åº“è¡¨ç»“æ„
- ç´¢å¼•è®¾è®¡
- æŸ¥è¯¢æ–¹æ³•è®¾è®¡
```

#### Step 1.3: è®¾è®¡çŠ¶æ€ç®¡ç†
```bash
ğŸ¤– ä½¿ç”¨: writing-plans Skill

è¾“å…¥:
- å…¨å±€çŠ¶æ€éœ€æ±‚
- ç»„ä»¶é€šä¿¡éœ€æ±‚

è¾“å‡º:
- Zustand Storeç»“æ„
- State Slicesåˆ’åˆ†
- çŠ¶æ€æ›´æ–°ç­–ç•¥
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] æ¶æ„è®¾è®¡æ–‡æ¡£
- [ ] æ•°æ®åº“Schemaè®¾è®¡
- [ ] çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
- [ ] IPCé€šä¿¡åè®®

---

### 4.4 é˜¶æ®µ2: UIç»„ä»¶å¼€å‘

**ğŸ¯ ç›®æ ‡**: å¼€å‘æ‰€æœ‰ç•Œé¢ç»„ä»¶

**ğŸ¤– CCå·¥ä½œæµ**:

#### Step 2.1: ç”ŸæˆåŸºç¡€ç»„ä»¶
```bash
ğŸ¨ ä½¿ç”¨: frontend-design æ’ä»¶

è¾“å…¥:
"åˆ›å»ºä»¥ä¸‹åŸºç¡€ç»„ä»¶ï¼Œä½¿ç”¨Tailwind CSSï¼Œé£æ ¼ï¼šæ— è¾¹æ¡†ã€ç»¿è‰²ä¸»é¢˜ã€æ¸©å’Œå¯¹è¯æ„Ÿ"

ç»„ä»¶åˆ—è¡¨:
1. Button - æŒ‰é’®ç»„ä»¶
2. Card - å¡ç‰‡å®¹å™¨
3. ProgressBar - è¿›åº¦æ¡ï¼ˆç»¿è‰²å¡«å……ï¼‰
4. Countdown - å€’è®¡æ—¶ç»„ä»¶ï¼ˆå¤§å·æ•°å­—ï¼‰
5. Modal - æ¨¡æ€æ¡†
6. Input - è¾“å…¥æ¡†
7. Select - é€‰æ‹©å™¨
8. Tab - æ ‡ç­¾é¡µ

è¾“å‡º:
- src/components/ ä¸‹çš„æ‰€æœ‰åŸºç¡€ç»„ä»¶
- å¸¦æœ‰å®Œæ•´çš„TypeScriptç±»å‹
- å¸¦æœ‰Tailwindæ ·å¼
```

#### Step 2.2: ç”Ÿæˆæé†’å¼¹çª—
```bash
ğŸ¨ ä½¿ç”¨: frontend-design æ’ä»¶

è¾“å…¥:
"æ ¹æ®PRDçš„å¼¹çª—è®¾è®¡ï¼Œåˆ›å»ºä¸‰ç§æé†’å¼¹çª—ç»„ä»¶"

å‚è€ƒPRD:
- è¿åŠ¨æé†’å¼¹çª—ï¼ˆå¤§çª—å£ï¼Œæ˜¾ç¤ºMETã€é¢„è®¡æ¶ˆè€—ï¼‰
- è¿œçœºæé†’å¼¹çª—ï¼ˆå¤§çª—å£ï¼‰
- ç«™ç«‹æé†’å¼¹çª—ï¼ˆå°çª—å£ï¼Œ60%å¤§å°ï¼‰

è¾“å‡º:
- src/pages/ReminderWindow/ExerciseReminder.tsx
- src/pages/ReminderWindow/GazeReminder.tsx
- src/pages/ReminderWindow/StandReminder.tsx
```

#### Step 2.3: ç”Ÿæˆé¦–é¡µç»Ÿè®¡ç•Œé¢
```bash
ğŸ¨ ä½¿ç”¨: frontend-design æ’ä»¶

è¾“å…¥:
"æ ¹æ®PRDçš„é¦–é¡µå¸ƒå±€ï¼Œåˆ›å»ºé¦–é¡µç»„ä»¶"

å‚è€ƒPRD:
- ä»Šæ—¥ç›®æ ‡è¿›åº¦å¡ç‰‡
- ä»Šæ—¥æ´»åŠ¨è¯¦æƒ…åˆ—è¡¨
- å†å²æ•°æ®å¡ç‰‡
- åº•éƒ¨æŒ‰é’®åŒº

è¾“å‡º:
- src/pages/HomePage/index.tsx
- src/pages/HomePage/TodayProgress.tsx
- src/pages/HomePage/ActivityList.tsx
- src/pages/HomePage/HistoryStats.tsx
```

#### Step 2.4: ç”Ÿæˆè®¾ç½®é¡µé¢
```bash
ğŸ¨ ä½¿ç”¨: frontend-design æ’ä»¶

è¾“å…¥:
"åˆ›å»ºè®¾ç½®é¡µé¢ï¼Œ3ä¸ªTabï¼Œä½¿ç”¨Tailwindçš„Tabç»„ä»¶"

Tabå†…å®¹:
- Tab1: ä¸ªäººä¿¡æ¯ï¼ˆèº«é«˜ã€ä½“é‡ã€å¹´é¾„ã€æ€§åˆ«ã€ç›®æ ‡ï¼‰
- Tab2: æé†’è®¾ç½®ï¼ˆä¸‰ç±»æé†’çš„é—´éš”å’Œæ—¶é•¿ï¼‰
- Tab3: è¿åŠ¨åº“ï¼ˆåˆ—è¡¨å±•ç¤ºï¼Œæ·»åŠ /åˆ é™¤ï¼‰

è¾“å‡º:
- src/pages/SettingsPage/index.tsx
- src/pages/SettingsPage/PersonalTab.tsx
- src/pages/SettingsPage/ReminderTab.tsx
- src/pages/SettingsPage/ExerciseTab.tsx
```

#### Step 2.5: ç”Ÿæˆé¦–æ¬¡å¼•å¯¼æµç¨‹
```bash
ğŸ¨ ä½¿ç”¨: frontend-design æ’ä»¶

è¾“å…¥:
"åˆ›å»º3é¡µå¼•å¯¼æµç¨‹ï¼Œå¸¦ä¸Šä¸€æ­¥/ä¸‹ä¸€æ­¥å¯¼èˆª"

æµç¨‹:
1. ä¸ªäººä¿¡æ¯å½•å…¥
2. æé†’å‚æ•°è®¾ç½®
3. æ¬¢è¿é¡µ

è¾“å‡º:
- src/pages/OnboardingFlow/index.tsx
- src/pages/OnboardingFlow/Step1Personal.tsx
- src/pages/OnboardingFlow/Step2Settings.tsx
- src/pages/OnboardingFlow/Step3Welcome.tsx
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] æ‰€æœ‰åŸºç¡€ç»„ä»¶
- [ ] ä¸‰ç§æé†’å¼¹çª—
- [ ] é¦–é¡µç»Ÿè®¡ç•Œé¢
- [ ] è®¾ç½®é¡µé¢
- [ ] é¦–æ¬¡å¼•å¯¼æµç¨‹

---

### 4.5 é˜¶æ®µ3: æ ¸å¿ƒåŠŸèƒ½å¼€å‘

**ğŸ¯ ç›®æ ‡**: å®ç°æ ¸å¿ƒä¸šåŠ¡é€»è¾‘

#### Step 3.1: å®ç°ä¸‰ä¸ªç‹¬ç«‹å®šæ—¶å™¨

**ğŸ¤– CCå·¥ä½œæµ**:
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"å®ç°ä¸‰ä¸ªç‹¬ç«‹çš„æé†’å®šæ—¶å™¨ï¼Œæ»¡è¶³ä»¥ä¸‹è¦æ±‚ï¼š
1. å„è‡ªç‹¬ç«‹è¿è¡Œï¼Œä¸å…±äº«æ—¶é—´çº¿
2. ä¸èƒ½åŒæ—¶è§¦å‘ï¼Œæœ€å°é—´éš”2åˆ†é’Ÿ
3. åœ¨è®¾å®šèŒƒå›´å†…éšæœºè§¦å‘
4. æ”¯æŒæš‚åœ/æ¢å¤
5. ä¼‘çœ åé‡æ–°è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´"

è¾“å‡º:
- electron/reminder/scheduler.ts
- electron/reminder/timer-manager.ts
- electron/reminder/reminder-types.ts
```

**å…³é”®å®ç°ç‚¹**:
```typescript
// timer-manager.ts æ ¸å¿ƒé€»è¾‘
class TimerManager {
  private timers: Map<ReminderType, NodeJS.Timeout>;
  private lastTriggerTime: Map<ReminderType, number>;
  private currentReminder: ReminderType | null;
  
  // æ£€æŸ¥æ˜¯å¦å¯ä»¥è§¦å‘æé†’
  canTrigger(type: ReminderType): boolean {
    // 1. æ²¡æœ‰å…¶ä»–æé†’æ­£åœ¨è¿›è¡Œ
    if (this.currentReminder !== null) return false;
    
    // 2. è·ä¸Šæ¬¡æé†’ >= 2åˆ†é’Ÿ
    const lastTime = this.lastTriggerTime.get(type) || 0;
    const now = Date.now();
    if (now - lastTime < 2 * 60 * 1000) return false;
    
    return true;
  }
  
  // éšæœºè°ƒåº¦
  schedule(type: ReminderType, min: number, max: number) {
    const interval = Math.random() * (max - min) + min;
    const timer = setTimeout(() => {
      if (this.canTrigger(type)) {
        this.showReminder(type);
      } else {
        // é‡æ–°è°ƒåº¦
        this.schedule(type, min, max);
      }
    }, interval * 60 * 1000);
    
    this.timers.set(type, timer);
  }
}
```

#### Step 3.2: å®ç°METè®¡ç®—

**ğŸ¤– CCå·¥ä½œæµ**:
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"å®ç°METå¡è·¯é‡Œè®¡ç®—å™¨ï¼Œå…¬å¼ï¼šæ¶ˆè€—(å¤§å¡) = MET Ã— ä½“é‡(kg) Ã— æ—¶é•¿(åˆ†é’Ÿ) / 60"

è¾“å‡º:
- src/utils/met-calculator.ts
```

#### Step 3.3: å®ç°IPCé€šä¿¡

**ğŸ¤– CCå·¥ä½œæµ**:
```bash
ğŸ’¡ ä½¿ç”¨: brainstorming Skill â†’ writing-plans Skill â†’ executing-plans Skill

Step 1: brainstorming
æ€è€ƒéœ€è¦å“ªäº›IPCé€šé“ï¼š
- è·å–ç”¨æˆ·ä¿¡æ¯
- ä¿å­˜ç”¨æˆ·ä¿¡æ¯
- è·å–æ´»åŠ¨è®°å½•
- ä¿å­˜æ´»åŠ¨è®°å½•
- è·å–ç»Ÿè®¡æ•°æ®
- æ›´æ–°ä½“é‡
- æš‚åœ/æ¢å¤æé†’
- ...

Step 2: writing-plans
è§„åˆ’IPCæ¶æ„ï¼š
- å®šä¹‰æ‰€æœ‰channels
- è®¾è®¡è¯·æ±‚/å“åº”æ ¼å¼
- é”™è¯¯å¤„ç†ç­–ç•¥

Step 3: executing-plans
å®ç°ä»£ç ï¼š
- electron/ipc/channels.ts - å®šä¹‰é€šé“å
- electron/ipc/handlers.ts - å®ç°å¤„ç†å™¨
- src/hooks/useIPC.ts - Reactç«¯è°ƒç”¨Hook
```

**å…³é”®å®ç°ç‚¹**:
```typescript
// channels.ts
export const IPC_CHANNELS = {
  // ç”¨æˆ·ç›¸å…³
  GET_USER_INFO: 'get-user-info',
  SAVE_USER_INFO: 'save-user-info',
  UPDATE_WEIGHT: 'update-weight',
  
  // æ´»åŠ¨ç›¸å…³
  GET_ACTIVITIES: 'get-activities',
  SAVE_ACTIVITY: 'save-activity',
  
  // ç»Ÿè®¡ç›¸å…³
  GET_TODAY_STATS: 'get-today-stats',
  GET_HISTORY_STATS: 'get-history-stats',
  
  // æé†’æ§åˆ¶
  PAUSE_REMINDERS: 'pause-reminders',
  RESUME_REMINDERS: 'resume-reminders',
  
  // çª—å£æ§åˆ¶
  SHOW_MAIN_WINDOW: 'show-main-window',
  SHOW_REMINDER: 'show-reminder',
} as const;

// useIPC.ts
export function useIPC() {
  const getTodayStats = useCallback(async () => {
    return await window.electron.invoke(IPC_CHANNELS.GET_TODAY_STATS);
  }, []);
  
  const saveActivity = useCallback(async (activity: Activity) => {
    return await window.electron.invoke(IPC_CHANNELS.SAVE_ACTIVITY, activity);
  }, []);
  
  return { getTodayStats, saveActivity, ... };
}
```

#### Step 3.4: å®ç°ç³»ç»Ÿæ‰˜ç›˜

**ğŸ¤– CCå·¥ä½œæµ**:
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"å®ç°ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½ï¼ŒåŒ…æ‹¬ï¼š
1. æ‰˜ç›˜å›¾æ ‡ï¼ˆæ­£å¸¸/æš‚åœä¸¤ç§çŠ¶æ€ï¼‰
2. å³é”®èœå•ï¼ˆæ‰“å¼€ã€æš‚åœ/æ¢å¤ã€è®¾ç½®ã€é€€å‡ºï¼‰
3. ç‚¹å‡»å›¾æ ‡æ‰“å¼€ä¸»çª—å£"

è¾“å‡º:
- electron/tray/tray-manager.ts
```

#### Step 3.5: å®ç°å¼€æœºè‡ªå¯åŠ¨

**ğŸ¤– CCå·¥ä½œæµ**:
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"ä½¿ç”¨auto-launchåŒ…å®ç°å¼€æœºè‡ªå¯åŠ¨ï¼Œå¯åœ¨è®¾ç½®ä¸­å¼€å…³"

è¾“å‡º:
- electron/utils/auto-launch.ts
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] ä¸‰ä¸ªç‹¬ç«‹å®šæ—¶å™¨
- [ ] METè®¡ç®—å™¨
- [ ] IPCé€šä¿¡å±‚
- [ ] ç³»ç»Ÿæ‰˜ç›˜
- [ ] å¼€æœºè‡ªå¯åŠ¨

---

### 4.6 é˜¶æ®µ4: æ•°æ®æŒä¹…åŒ–

**ğŸ¯ ç›®æ ‡**: å®ç°æ•°æ®åº“æ“ä½œ

**ğŸ¤– CCå·¥ä½œæµ**:

#### Step 4.1: åˆ›å»ºæ•°æ®åº“Schema
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"ä½¿ç”¨better-sqlite3åˆ›å»ºæ•°æ®åº“ï¼ŒåŒ…å«ä»¥ä¸‹è¡¨ï¼š
- user_info
- reminder_settings
- exercises
- activities
- daily_stats
- system_settings

åˆå§‹åŒ–15ä¸ªè¿åŠ¨æ•°æ®"

è¾“å‡º:
- electron/database/db.ts
- electron/database/schema.ts
- electron/database/init-data.ts
```

#### Step 4.2: å®ç°æŸ¥è¯¢æ–¹æ³•
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"å®ç°æ‰€æœ‰æ•°æ®åº“æŸ¥è¯¢æ–¹æ³•ï¼ŒåŒ…æ‹¬ï¼š
- ç”¨æˆ·ä¿¡æ¯çš„å¢åˆ æ”¹æŸ¥
- æ´»åŠ¨è®°å½•çš„å¢åˆ æ”¹æŸ¥
- ç»Ÿè®¡æ•°æ®çš„è®¡ç®—
- è¿åŠ¨åº“çš„å¢åˆ æ”¹æŸ¥"

è¾“å‡º:
- electron/database/queries.ts
```

**å…³é”®æŸ¥è¯¢ç¤ºä¾‹**:
```typescript
// queries.ts
export class DatabaseQueries {
  constructor(private db: Database.Database) {}
  
  // è·å–ä»Šæ—¥ç»Ÿè®¡
  getTodayStats(date: string) {
    const stmt = this.db.prepare(`
      SELECT 
        SUM(CASE WHEN type = 'exercise' THEN calories ELSE 0 END) as total_calories,
        COUNT(CASE WHEN type = 'exercise' THEN 1 END) as exercise_count,
        COUNT(CASE WHEN type = 'gaze' THEN 1 END) as gaze_count,
        COUNT(CASE WHEN type = 'stand' THEN 1 END) as stand_count
      FROM activities
      WHERE date = ?
    `);
    return stmt.get(date);
  }
  
  // è·å–è¿ç»­æ‰“å¡å¤©æ•°
  getStreakDays(): number {
    const stmt = this.db.prepare(`
      SELECT COUNT(*) as streak
      FROM (
        SELECT date, achieved
        FROM daily_stats
        WHERE achieved = 1
        ORDER BY date DESC
      )
      WHERE rowid <= (
        SELECT MIN(rowid)
        FROM (
          SELECT rowid FROM daily_stats WHERE achieved = 0
          ORDER BY date DESC
          LIMIT 1
        )
      )
    `);
    return stmt.get()?.streak || 0;
  }
  
  // ä¿å­˜æ´»åŠ¨è®°å½•
  saveActivity(activity: Activity) {
    const stmt = this.db.prepare(`
      INSERT INTO activities (type, name, duration, calories, met_value, weight, timestamp, date)
      VALUES (?, ?, ?, ?, ?, ?, ?, ?)
    `);
    return stmt.run(
      activity.type,
      activity.name,
      activity.duration,
      activity.calories,
      activity.metValue,
      activity.weight,
      activity.timestamp,
      activity.date
    );
  }
}
```

#### Step 4.3: å®ç°æ•°æ®è¿ç§»
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"å®ç°æ•°æ®åº“ç‰ˆæœ¬ç®¡ç†å’Œè¿ç§»åŠŸèƒ½"

è¾“å‡º:
- electron/database/migrations.ts
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] æ•°æ®åº“Schema
- [ ] æŸ¥è¯¢æ–¹æ³•
- [ ] æ•°æ®è¿ç§»æœºåˆ¶
- [ ] åˆå§‹æ•°æ®

---

### 4.7 é˜¶æ®µ5: ç³»ç»Ÿé›†æˆ

**ğŸ¯ ç›®æ ‡**: æ•´åˆæ‰€æœ‰æ¨¡å—ï¼Œæ‰“é€šæ•°æ®æµ

**ğŸ¤– CCå·¥ä½œæµ**:

#### Step 5.1: é›†æˆçŠ¶æ€ç®¡ç†
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"åˆ›å»ºZustand Storeï¼Œç®¡ç†å…¨å±€çŠ¶æ€"

è¾“å‡º:
- src/store/useStore.ts
- src/store/slices/userSlice.ts
- src/store/slices/reminderSlice.ts
- src/store/slices/statsSlice.ts
```

**Zustand Storeç¤ºä¾‹**:
```typescript
// useStore.ts
import create from 'zustand';

interface AppState {
  // ç”¨æˆ·çŠ¶æ€
  user: UserInfo | null;
  setUser: (user: UserInfo) => void;
  updateWeight: (weight: number) => void;
  
  // ç»Ÿè®¡çŠ¶æ€
  todayStats: TodayStats | null;
  historyStats: HistoryStats | null;
  activities: Activity[];
  loadTodayStats: () => Promise<void>;
  loadActivities: () => Promise<void>;
  
  // æé†’çŠ¶æ€
  isPaused: boolean;
  togglePause: () => void;
  
  // è®¾ç½®çŠ¶æ€
  reminderSettings: ReminderSettings;
  updateReminderSettings: (settings: Partial<ReminderSettings>) => void;
}

export const useStore = create<AppState>((set, get) => ({
  user: null,
  setUser: (user) => set({ user }),
  updateWeight: async (weight) => {
    await window.electron.invoke('update-weight', weight);
    set((state) => ({
      user: state.user ? { ...state.user, weight } : null
    }));
  },
  
  todayStats: null,
  historyStats: null,
  activities: [],
  
  loadTodayStats: async () => {
    const stats = await window.electron.invoke('get-today-stats');
    set({ todayStats: stats });
  },
  
  loadActivities: async () => {
    const activities = await window.electron.invoke('get-activities');
    set({ activities });
  },
  
  isPaused: false,
  togglePause: () => {
    const { isPaused } = get();
    window.electron.send(isPaused ? 'resume-reminders' : 'pause-reminders');
    set({ isPaused: !isPaused });
  },
  
  reminderSettings: defaultReminderSettings,
  updateReminderSettings: async (settings) => {
    await window.electron.invoke('update-reminder-settings', settings);
    set((state) => ({
      reminderSettings: { ...state.reminderSettings, ...settings }
    }));
  },
}));
```

#### Step 5.2: å®ç°çª—å£ç®¡ç†
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"å®ç°ä¸»çª—å£ã€è®¾ç½®çª—å£ã€æé†’å¼¹çª—çš„åˆ›å»ºå’Œç®¡ç†"

è¾“å‡º:
- electron/window/main-window.ts
- electron/window/settings-window.ts
- electron/window/reminder-window.ts
```

#### Step 5.3: è¿æ¥ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹
```bash
âš¡ ä½¿ç”¨: executing-plans Skill

ä»»åŠ¡:
1. åœ¨main.tsä¸­åˆå§‹åŒ–æ‰€æœ‰æ¨¡å—
2. åœ¨App.tsxä¸­åˆå§‹åŒ–Reactåº”ç”¨
3. æµ‹è¯•IPCé€šä¿¡æ˜¯å¦æ­£å¸¸
4. æµ‹è¯•å®šæ—¶å™¨æ˜¯å¦æ­£å¸¸è§¦å‘
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] Zustand Store
- [ ] çª—å£ç®¡ç†
- [ ] ä¸»è¿›ç¨‹å’Œæ¸²æŸ“è¿›ç¨‹è¿æ¥
- [ ] å®Œæ•´çš„æ•°æ®æµ

---

### 4.8 é˜¶æ®µ6: æµ‹è¯•ä¸ä¼˜åŒ–

**ğŸ¯ ç›®æ ‡**: æµ‹è¯•åŠŸèƒ½ï¼Œä¼˜åŒ–æ€§èƒ½

**ğŸ¤– CCå·¥ä½œæµ**:

#### Step 6.1: åŠŸèƒ½æµ‹è¯•
```bash
âœ… ä½¿ç”¨: verification-before-completion Skill

æµ‹è¯•æ¸…å•:
- [ ] é¦–æ¬¡å¯åŠ¨å¼•å¯¼æµç¨‹
- [ ] ä¸‰ç±»æé†’æ˜¯å¦æ­£å¸¸è§¦å‘
- [ ] æé†’çª—å£æ˜¾ç¤ºæ˜¯å¦æ­£ç¡®
- [ ] è·³è¿‡æŒ‰é’®æ˜¯å¦ç”Ÿæ•ˆ
- [ ] å¡è·¯é‡Œè®¡ç®—æ˜¯å¦å‡†ç¡®
- [ ] æ•°æ®ç»Ÿè®¡æ˜¯å¦æ­£ç¡®
- [ ] è¿ç»­æ‰“å¡é€»è¾‘æ˜¯å¦æ­£ç¡®
- [ ] ä½“é‡æ›´æ–°æ˜¯å¦å½±å“åç»­è®¡ç®—
- [ ] æš‚åœ/æ¢å¤æ˜¯å¦æ­£å¸¸
- [ ] ç³»ç»Ÿæ‰˜ç›˜åŠŸèƒ½æ˜¯å¦æ­£å¸¸
- [ ] å¼€æœºè‡ªå¯åŠ¨æ˜¯å¦ç”Ÿæ•ˆ
```

#### Step 6.2: æ€§èƒ½æµ‹è¯•
```bash
æµ‹è¯•é¡¹:
- [ ] å†…å­˜å ç”¨: ç›®æ ‡ < 100MB
- [ ] å¯åŠ¨æ—¶é—´: ç›®æ ‡ < 2ç§’
- [ ] CPUå ç”¨: åå° < 1%
- [ ] æ•°æ®åº“æŸ¥è¯¢: < 1ms
```

#### Step 6.3: æ€§èƒ½ä¼˜åŒ–
```bash
ğŸ› ä½¿ç”¨: systematic-debugging Skill

å¦‚æœæ€§èƒ½ä¸è¾¾æ ‡ï¼Œé€é¡¹æ’æŸ¥:
1. å†…å­˜å ç”¨é«˜ â†’ æ£€æŸ¥æ˜¯å¦æœ‰å†…å­˜æ³„æ¼
2. å¯åŠ¨æ…¢ â†’ ä½¿ç”¨æ‡’åŠ è½½ã€ä»£ç åˆ†å‰²
3. CPUå ç”¨é«˜ â†’ æ£€æŸ¥å®šæ—¶å™¨æ˜¯å¦è¿‡äºé¢‘ç¹
```

#### Step 6.4: Bugä¿®å¤
```bash
ğŸ› ä½¿ç”¨: systematic-debugging Skill + build-error-resolver Agent

æµç¨‹:
1. è®°å½•æ‰€æœ‰Bug
2. é€ä¸ªä½¿ç”¨systematic-debuggingåˆ†æ
3. ä¿®å¤å¹¶éªŒè¯
4. ä½¿ç”¨verification-before-completionå†æ¬¡éªŒè¯
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] åŠŸèƒ½æµ‹è¯•æŠ¥å‘Š
- [ ] æ€§èƒ½æµ‹è¯•æŠ¥å‘Š
- [ ] Bugä¿®å¤æ¸…å•
- [ ] ä¼˜åŒ–åçš„ä»£ç 

---

### 4.9 é˜¶æ®µ7: æ‰“åŒ…ä¸éƒ¨ç½²

**ğŸ¯ ç›®æ ‡**: æ„å»ºå¯åˆ†å‘çš„å®‰è£…åŒ…

**ğŸ¤– CCå·¥ä½œæµ**:

#### Step 7.1: é…ç½®electron-builder
```bash
âš¡ ä½¿ç”¨: feature-dev æ’ä»¶

åŠŸèƒ½æè¿°:
"é…ç½®electron-builderï¼Œç”ŸæˆWindowså®‰è£…åŒ…(.exe)"

è¾“å‡º:
- electron-builder.yml
- package.jsonä¸­çš„buildè„šæœ¬
```

**electron-builder.yml é…ç½®**:
```yaml
appId: com.health-reminder.app
productName: å¥åº·æé†’åŠ©æ‰‹
directories:
  output: release
  buildResources: resources
files:
  - dist/**/*
  - electron/**/*
  - node_modules/**/*
  - package.json
asar: true
win:
  target:
    - target: nsis
      arch:
        - x64
  icon: resources/icons/icon.ico
  artifactName: ${productName}-${version}-setup.${ext}
nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: ${productName}
```

#### Step 7.2: æ„å»ºå’Œæµ‹è¯•
```bash
1. npm run build    # æ„å»ºå‰ç«¯å’Œåç«¯
2. npm run package  # æ‰“åŒ…æˆå®‰è£…åŒ…
3. åœ¨å¹²å‡€ç¯å¢ƒæµ‹è¯•å®‰è£…åŒ…
   - å®‰è£…
   - é¦–æ¬¡å¯åŠ¨
   - åŠŸèƒ½éªŒè¯
   - å¸è½½
```

#### Step 7.3: ç”Ÿæˆæ–‡æ¡£
```bash
ğŸ“– ä½¿ç”¨: code-review æ’ä»¶

ç”Ÿæˆ:
- ç”¨æˆ·æ‰‹å†Œ
- å®‰è£…è¯´æ˜
- å¸¸è§é—®é¢˜FAQ
```

**ğŸ“¦ äº§å‡ºç‰©**:
- [ ] Windowså®‰è£…åŒ…(.exe)
- [ ] ç”¨æˆ·æ‰‹å†Œ
- [ ] å®‰è£…è¯´æ˜
- [ ] README.md

---

## 5. æ ¸å¿ƒåŠŸèƒ½å®ç°æ–¹æ¡ˆ

### 5.1 ä¸‰ä¸ªç‹¬ç«‹å®šæ—¶å™¨çš„å®ç°

**æŠ€æœ¯æ–¹æ¡ˆ**: ä½¿ç”¨å•ä¾‹æ¨¡å¼çš„TimerManagerç®¡ç†ä¸‰ä¸ªç‹¬ç«‹çš„å®šæ—¶å™¨

```typescript
// electron/reminder/timer-manager.ts

export type ReminderType = 'exercise' | 'gaze' | 'stand';

interface TimerState {
  type: ReminderType;
  nextTriggerTime: number;
  timer: NodeJS.Timeout | null;
  settings: {
    intervalMin: number;
    intervalMax: number;
    duration: number;
  };
}

export class TimerManager {
  private static instance: TimerManager;
  private timers: Map<ReminderType, TimerState> = new Map();
  private currentReminder: ReminderType | null = null;
  private lastTriggerTime: Map<ReminderType, number> = new Map();
  private isPaused: boolean = false;
  
  private constructor() {
    this.initTimers();
  }
  
  static getInstance(): TimerManager {
    if (!TimerManager.instance) {
      TimerManager.instance = new TimerManager();
    }
    return TimerManager.instance;
  }
  
  // åˆå§‹åŒ–ä¸‰ä¸ªå®šæ—¶å™¨
  private initTimers() {
    const types: ReminderType[] = ['exercise', 'gaze', 'stand'];
    types.forEach(type => {
      this.timers.set(type, {
        type,
        nextTriggerTime: 0,
        timer: null,
        settings: { intervalMin: 10, intervalMax: 20, duration: 120 }
      });
    });
  }
  
  // å¯åŠ¨æ‰€æœ‰å®šæ—¶å™¨
  start() {
    this.timers.forEach((state, type) => {
      this.scheduleNext(type);
    });
  }
  
  // è°ƒåº¦ä¸‹ä¸€æ¬¡æé†’
  private scheduleNext(type: ReminderType) {
    if (this.isPaused) return;
    
    const state = this.timers.get(type)!;
    const { intervalMin, intervalMax } = state.settings;
    
    // éšæœºé—´éš”ï¼ˆåˆ†é’Ÿï¼‰
    const interval = Math.random() * (intervalMax - intervalMin) + intervalMin;
    const nextTime = Date.now() + interval * 60 * 1000;
    
    state.nextTriggerTime = nextTime;
    state.timer = setTimeout(() => {
      this.tryTrigger(type);
    }, interval * 60 * 1000);
  }
  
  // å°è¯•è§¦å‘æé†’
  private tryTrigger(type: ReminderType) {
    if (!this.canTrigger(type)) {
      // ä¸èƒ½è§¦å‘ï¼Œ1åˆ†é’Ÿåé‡è¯•
      const state = this.timers.get(type)!;
      state.timer = setTimeout(() => this.tryTrigger(type), 60 * 1000);
      return;
    }
    
    // å¯ä»¥è§¦å‘
    this.currentReminder = type;
    this.lastTriggerTime.set(type, Date.now());
    this.showReminder(type);
  }
  
  // æ£€æŸ¥æ˜¯å¦å¯ä»¥è§¦å‘
  private canTrigger(type: ReminderType): boolean {
    // 1. æ²¡æœ‰å…¶ä»–æé†’æ­£åœ¨è¿›è¡Œ
    if (this.currentReminder !== null && this.currentReminder !== type) {
      return false;
    }
    
    // 2. è·ç¦»ä»»ä½•æé†’çš„ä¸Šæ¬¡è§¦å‘æ—¶é—´ >= 2åˆ†é’Ÿ
    const now = Date.now();
    const minInterval = 2 * 60 * 1000; // 2åˆ†é’Ÿ
    
    for (const [otherType, lastTime] of this.lastTriggerTime) {
      if (now - lastTime < minInterval) {
        return false;
      }
    }
    
    return true;
  }
  
  // æ˜¾ç¤ºæé†’çª—å£
  private showReminder(type: ReminderType) {
    const state = this.timers.get(type)!;
    const windowManager = require('./window/reminder-window');
    windowManager.showReminder(type, state.settings.duration);
  }
  
  // æé†’å®Œæˆï¼ˆå€’è®¡æ—¶ç»“æŸæˆ–è·³è¿‡ï¼‰
  async onReminderComplete(type: ReminderType, completed: boolean) {
    this.currentReminder = null;
    
    // å¦‚æœæ˜¯è¿åŠ¨ä¸”å®Œæˆäº†ï¼Œæ£€æŸ¥æ˜¯å¦è¾¾æˆæ¯æ—¥ç›®æ ‡
    if (type === 'exercise' && completed) {
      await this.checkDailyGoal();
    }
    
    // è°ƒåº¦ä¸‹ä¸€æ¬¡
    this.scheduleNext(type);
  }
  
  // æ£€æŸ¥æ¯æ—¥ç›®æ ‡æ˜¯å¦è¾¾æˆ
  private async checkDailyGoal() {
    const db = require('../database/queries');
    const today = new Date().toISOString().split('T')[0];
    const stats = await db.getTodayStats(today);
    
    // é¦–æ¬¡è¾¾æˆç›®æ ‡æ—¶å¼¹å‡ºåº†ç¥çª—å£
    if (stats.totalCalories >= stats.targetCalories && !stats.achievedToday) {
      this.showGoalAchievedNotification(stats.totalCalories, stats.targetCalories);
      // æ›´æ–°æ•°æ®åº“æ ‡è®°ä»Šæ—¥å·²è¾¾æˆ
      await db.markTodayAchieved(today);
    }
  }
  
  // æ˜¾ç¤ºç›®æ ‡å®Œæˆåº†ç¥çª—å£
  private showGoalAchievedNotification(achieved: number, target: number) {
    const windowManager = require('./window/reminder-window');
    windowManager.showGoalAchievedNotification(achieved, target);
  }
  
  // æš‚åœ
  pause() {
    this.isPaused = true;
    this.timers.forEach((state) => {
      if (state.timer) {
        clearTimeout(state.timer);
        state.timer = null;
      }
    });
  }
  
  // æ¢å¤
  resume() {
    this.isPaused = false;
    this.timers.forEach((state, type) => {
      this.scheduleNext(type);
    });
  }
  
  // æ›´æ–°è®¾ç½®
  updateSettings(type: ReminderType, settings: Partial<TimerState['settings']>) {
    const state = this.timers.get(type)!;
    state.settings = { ...state.settings, ...settings };
    
    // é‡æ–°è°ƒåº¦
    if (state.timer) {
      clearTimeout(state.timer);
    }
    this.scheduleNext(type);
  }
  
  // ç³»ç»Ÿä¼‘çœ /æ¢å¤å¤„ç†
  onSystemResume() {
    // æ¸…é™¤æ‰€æœ‰æ—§å®šæ—¶å™¨
    this.timers.forEach((state) => {
      if (state.timer) {
        clearTimeout(state.timer);
        state.timer = null;
      }
    });
    
    // é‡æ–°è®¡ç®—ä¸‹æ¬¡æé†’æ—¶é—´
    if (!this.isPaused) {
      this.resume();
    }
  }
}
```

**å…³é”®ç‚¹**:
- æ¯ä¸ªæé†’ç±»å‹ç‹¬ç«‹çš„å®šæ—¶å™¨
- ä½¿ç”¨`canTrigger()`ç¡®ä¿2åˆ†é’Ÿé—´éš”å’Œäº’æ–¥
- ç³»ç»Ÿä¼‘çœ åé‡æ–°è®¡ç®—å®šæ—¶

---

### 5.2 å€’è®¡æ—¶å®ç°

**Reactç»„ä»¶å®ç°**:

```typescript
// src/components/Countdown.tsx

import { useEffect, useState } from 'react';

interface CountdownProps {
  duration: number;  // ç§’
  onComplete: () => void;
  lastTenSecondsColor?: string;
}

export function Countdown({ duration, onComplete, lastTenSecondsColor = 'text-orange-500' }: CountdownProps) {
  const [remaining, setRemaining] = useState(duration);
  
  useEffect(() => {
    if (remaining <= 0) {
      onComplete();
      return;
    }
    
    const timer = setTimeout(() => {
      setRemaining(remaining - 1);
    }, 1000);
    
    return () => clearTimeout(timer);
  }, [remaining, onComplete]);
  
  // æ ¼å¼åŒ–æ—¶é—´ MM:SS
  const formatTime = (seconds: number) => {
    const mins = Math.floor(seconds / 60);
    const secs = seconds % 60;
    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
  };
  
  // æœ€å10ç§’å˜è‰²
  const isLastTen = remaining <= 10;
  
  return (
    <div className={`text-6xl font-bold transition-colors ${isLastTen ? lastTenSecondsColor : 'text-green-600'}`}>
      {formatTime(remaining)}
    </div>
  );
}
```

---

### 5.3 METå¡è·¯é‡Œè®¡ç®—

```typescript
// src/utils/met-calculator.ts

/**
 * è®¡ç®—å¡è·¯é‡Œæ¶ˆè€—
 * å…¬å¼: æ¶ˆè€—(å¤§å¡) = MET Ã— ä½“é‡(kg) Ã— æ—¶é•¿(åˆ†é’Ÿ) / 60
 */
export function calculateCalories(
  metValue: number,
  weightKg: number,
  durationSeconds: number
): number {
  const durationMinutes = durationSeconds / 60;
  const calories = metValue * weightKg * durationMinutes / 60;
  return Math.round(calories * 10) / 10; // ä¿ç•™1ä½å°æ•°
}

/**
 * é¢„è®¡æ¶ˆè€—ï¼ˆå€’è®¡æ—¶å¼€å§‹å‰æ˜¾ç¤ºï¼‰
 */
export function estimateCalories(
  metValue: number,
  weightKg: number,
  durationSeconds: number
): string {
  const calories = calculateCalories(metValue, weightKg, durationSeconds);
  return `${calories} åƒå¡`;
}

// ä½¿ç”¨ç¤ºä¾‹
// const calories = calculateCalories(8.0, 70, 120);
// console.log(calories); // 18.7
```

---

### 5.4 çª—å£ç®¡ç†

```typescript
// electron/window/reminder-window.ts

import { BrowserWindow, screen } from 'electron';

export class ReminderWindowManager {
  private windows: Map<ReminderType, BrowserWindow | null> = new Map();
  
  // æ˜¾ç¤ºæé†’çª—å£
  showReminder(type: ReminderType, duration: number) {
    // å¦‚æœçª—å£å·²å­˜åœ¨ï¼Œå…³é—­æ—§çš„
    if (this.windows.has(type) && this.windows.get(type)) {
      this.windows.get(type)!.close();
    }
    
    // åˆ›å»ºæ–°çª—å£
    const windowSize = this.getWindowSize(type);
    const window = new BrowserWindow({
      width: windowSize.width,
      height: windowSize.height,
      frame: false,           // æ— è¾¹æ¡†
      transparent: true,      // é€æ˜èƒŒæ™¯
      alwaysOnTop: true,      // å§‹ç»ˆç½®é¡¶
      skipTaskbar: true,      // ä¸æ˜¾ç¤ºåœ¨ä»»åŠ¡æ 
      resizable: false,       // ä¸å¯è°ƒæ•´å¤§å°
      movable: true,          // å¯æ‹–åŠ¨
      webPreferences: {
        nodeIntegration: false,
        contextIsolation: true,
        preload: path.join(__dirname, 'preload.js')
      }
    });
    
    // å±…ä¸­æ˜¾ç¤º
    this.centerWindow(window);
    
    // åŠ è½½æé†’é¡µé¢
    window.loadURL(`${RENDERER_URL}#/reminder/${type}?duration=${duration}`);
    
    this.windows.set(type, window);
    
    // çª—å£å…³é—­æ—¶æ¸…ç†
    window.on('closed', () => {
      this.windows.set(type, null);
    });
  }
  
  // è·å–çª—å£å°ºå¯¸
  private getWindowSize(type: ReminderType) {
    if (type === 'stand') {
      // ç«™ç«‹æé†’çª—å£å°ä¸€äº› (60%)
      return { width: 320, height: 240 };
    } else {
      // è¿åŠ¨å’Œè¿œçœºçª—å£å¤§ä¸€äº›
      return { width: 500, height: 400 };
    }
  }
  
  // å±…ä¸­çª—å£
  private centerWindow(window: BrowserWindow) {
    const { width, height } = window.getBounds();
    const display = screen.getPrimaryDisplay();
    const { width: screenWidth, height: screenHeight } = display.workAreaSize;
    
    const x = Math.floor((screenWidth - width) / 2);
    const y = Math.floor((screenHeight - height) / 2);
    
    window.setPosition(x, y);
  }
  
  // å…³é—­æé†’çª—å£
  closeReminder(type: ReminderType) {
    const window = this.windows.get(type);
    if (window && !window.isDestroyed()) {
      window.close();
    }
    
    // ç«™ç«‹å®Œæˆåæ˜¾ç¤ºé¢å¤–æç¤º
    if (type === 'stand') {
      this.showStandCompleteNotification();
    }
  }
  
  // æ˜¾ç¤ºç«™ç«‹å®Œæˆæç¤º
  private showStandCompleteNotification() {
    const notification = new BrowserWindow({
      width: 300,
      height: 150,
      frame: false,
      transparent: true,
      alwaysOnTop: true,
      skipTaskbar: true,
      resizable: false,
      movable: false,
      webPreferences: {
        nodeIntegration: false,
        contextIsolation: true,
      }
    });
    
    // å±…ä¸­æ˜¾ç¤º
    this.centerWindow(notification);
    
    // åŠ è½½æç¤ºå†…å®¹
    notification.loadURL(`${RENDERER_URL}#/notification/stand-complete`);
    
    // 2ç§’åè‡ªåŠ¨å…³é—­
    setTimeout(() => {
      if (!notification.isDestroyed()) {
        notification.close();
      }
    }, 2000);
  }
  
  // æ˜¾ç¤ºç›®æ ‡å®Œæˆåº†ç¥çª—å£
  showGoalAchievedNotification(achieved: number, target: number) {
    const celebration = new BrowserWindow({
      width: 400,
      height: 250,
      frame: false,
      transparent: true,
      alwaysOnTop: true,
      skipTaskbar: true,
      resizable: false,
      movable: false,
      webPreferences: {
        nodeIntegration: false,
        contextIsolation: true,
      }
    });
    
    // å±…ä¸­æ˜¾ç¤º
    this.centerWindow(celebration);
    
    // åŠ è½½åº†ç¥å†…å®¹
    celebration.loadURL(`${RENDERER_URL}#/notification/goal-achieved?achieved=${achieved}&target=${target}`);
    
    // 3ç§’åè‡ªåŠ¨å…³é—­
    setTimeout(() => {
      if (!celebration.isDestroyed()) {
        celebration.close();
      }
    }, 3000);
  }
```

---

### 5.5 ç³»ç»Ÿæ‰˜ç›˜

```typescript
// electron/tray/tray-manager.ts

import { Tray, Menu, nativeImage, app } from 'electron';
import path from 'path';

export class TrayManager {
  private tray: Tray | null = null;
  private isPaused: boolean = false;
  
  create() {
    const iconPath = this.getIconPath();
    this.tray = new Tray(iconPath);
    
    this.tray.setToolTip('å¥åº·æé†’åŠ©æ‰‹');
    this.updateContextMenu();
    
    // ç‚¹å‡»å›¾æ ‡æ‰“å¼€ä¸»çª—å£
    this.tray.on('click', () => {
      const mainWindow = require('./window/main-window').getMainWindow();
      if (mainWindow) {
        if (mainWindow.isVisible()) {
          mainWindow.focus();
        } else {
          mainWindow.show();
        }
      }
    });
  }
  
  // æ›´æ–°ä¸Šä¸‹æ–‡èœå•
  private updateContextMenu() {
    const menu = Menu.buildFromTemplate([
      {
        label: 'æ‰“å¼€ä¸»ç•Œé¢',
        click: () => {
          const mainWindow = require('./window/main-window').getMainWindow();
          mainWindow?.show();
        }
      },
      {
        type: 'separator'
      },
      {
        label: this.isPaused ? 'æ¢å¤æé†’' : 'æš‚åœæé†’',
        click: () => {
          this.togglePause();
        }
      },
      {
        label: 'è®¾ç½®',
        click: () => {
          const settingsWindow = require('./window/settings-window').showSettings();
        }
      },
      {
        type: 'separator'
      },
      {
        label: 'é€€å‡º',
        click: () => {
          app.quit();
        }
      }
    ]);
    
    this.tray?.setContextMenu(menu);
  }
  
  // åˆ‡æ¢æš‚åœçŠ¶æ€
  togglePause() {
    this.isPaused = !this.isPaused;
    
    // æ›´æ–°å›¾æ ‡
    const iconPath = this.getIconPath();
    this.tray?.setImage(iconPath);
    
    // æ›´æ–°èœå•
    this.updateContextMenu();
    
    // é€šçŸ¥å®šæ—¶å™¨ç®¡ç†å™¨
    const timerManager = require('../reminder/timer-manager').TimerManager.getInstance();
    if (this.isPaused) {
      timerManager.pause();
    } else {
      timerManager.resume();
    }
  }
  
  // è·å–å›¾æ ‡è·¯å¾„
  private getIconPath(): string {
    const iconName = this.isPaused ? 'tray-icon-paused.png' : 'tray-icon.png';
    return path.join(__dirname, '../../resources/icons', iconName);
  }
  
  destroy() {
    this.tray?.destroy();
    this.tray = null;
  }
}
```

---

## 6. æ€§èƒ½ä¼˜åŒ–æ–¹æ¡ˆ

### 6.1 å‡å°‘å†…å­˜å ç”¨

#### ä¼˜åŒ–1: æŒ‰éœ€åˆ›å»ºæé†’çª—å£
```typescript
// âŒ ä¸å¥½çš„åšæ³•ï¼šå¯åŠ¨æ—¶åˆ›å»ºæ‰€æœ‰çª—å£
function init() {
  createExerciseWindow();
  createGazeWindow();
  createStandWindow();
  // å†…å­˜å ç”¨ï¼š3ä¸ªçª—å£ Ã— 30MB = 90MB
}

// âœ… å¥½çš„åšæ³•ï¼šæŒ‰éœ€åˆ›å»ºï¼Œç”¨å®Œé”€æ¯
function showReminder(type: ReminderType) {
  const window = createReminderWindow(type);
  window.on('closed', () => {
    // çª—å£å…³é—­åè‡ªåŠ¨é‡Šæ”¾å†…å­˜
  });
}
```

#### ä¼˜åŒ–2: ä¸»çª—å£æœ€å°åŒ–æ—¶éšè—
```typescript
mainWindow.on('minimize', () => {
  mainWindow.hide(); // é‡Šæ”¾æ¸²æŸ“èµ„æº
});

mainWindow.on('restore', () => {
  mainWindow.show();
});
```

#### ä¼˜åŒ–3: ç¦ç”¨DevToolsï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
```typescript
if (process.env.NODE_ENV === 'production') {
  // ä¸åŠ è½½DevToolsï¼ŒèŠ‚çœçº¦20MBå†…å­˜
  webPreferences: {
    devTools: false
  }
}
```

**é¢„æœŸæ•ˆæœ**: å†…å­˜å ç”¨ä» 90-100MB â†’ 60-80MB

---

### 6.2 åŠ å¿«å¯åŠ¨é€Ÿåº¦

#### ä¼˜åŒ–1: ä½¿ç”¨Viteæ„å»º
```typescript
// vite.config.ts
export default defineConfig({
  build: {
    rollupOptions: {
      output: {
        manualChunks: {
          'vendor': ['react', 'react-dom'],
          'zustand': ['zustand'],
        }
      }
    }
  }
});
```

#### ä¼˜åŒ–2: æ‡’åŠ è½½è®¾ç½®é¡µé¢
```typescript
// App.tsx
const SettingsPage = lazy(() => import('./pages/SettingsPage'));

function App() {
  return (
    <Suspense fallback={<Loading />}>
      <SettingsPage />
    </Suspense>
  );
}
```

#### ä¼˜åŒ–3: æ•°æ®åº“è¿æ¥æ± 
```typescript
// electron/database/db.ts
let dbInstance: Database.Database | null = null;

export function getDatabase(): Database.Database {
  if (!dbInstance) {
    dbInstance = new Database('health-reminder.db');
    // å¯ç”¨WALæ¨¡å¼ï¼Œæé«˜å¹¶å‘æ€§èƒ½
    dbInstance.pragma('journal_mode = WAL');
  }
  return dbInstance;
}
```

**é¢„æœŸæ•ˆæœ**: å¯åŠ¨æ—¶é—´ä» 2-3ç§’ â†’ 1-1.5ç§’

---

### 6.3 é™ä½CPUå ç”¨

#### ä¼˜åŒ–1: é¿å…é¢‘ç¹çš„å®šæ—¶å™¨
```typescript
// âŒ ä¸å¥½çš„åšæ³•ï¼šæ¯ç§’æ£€æŸ¥ä¸€æ¬¡
setInterval(() => {
  checkIfShouldTrigger();
}, 1000);

// âœ… å¥½çš„åšæ³•ï¼šä½¿ç”¨setTimeoutç²¾ç¡®è°ƒåº¦
function scheduleNext() {
  const nextTime = calculateNextTriggerTime();
  const delay = nextTime - Date.now();
  setTimeout(() => {
    trigger();
    scheduleNext(); // é€’å½’è°ƒåº¦
  }, delay);
}
```

#### ä¼˜åŒ–2: èŠ‚æµæ•°æ®åº“å†™å…¥
```typescript
// ä½¿ç”¨é˜²æŠ–ï¼Œé¿å…é¢‘ç¹å†™å…¥
const debouncedSave = debounce((data) => {
  db.save(data);
}, 1000);
```

**é¢„æœŸæ•ˆæœ**: åå°CPUå ç”¨ < 1%

---

## 7. æ„å»ºä¸éƒ¨ç½²

### 7.1 æ„å»ºè„šæœ¬

```json
// package.json
{
  "scripts": {
    "dev": "concurrently \"npm run dev:vite\" \"npm run dev:electron\"",
    "dev:vite": "vite",
    "dev:electron": "wait-on http://localhost:5173 && electron .",
    
    "build": "npm run build:renderer && npm run build:main",
    "build:renderer": "vite build",
    "build:main": "tsc -p tsconfig.electron.json",
    
    "package": "npm run build && electron-builder",
    "package:win": "npm run build && electron-builder --win",
    
    "typecheck": "tsc --noEmit",
    "lint": "eslint src electron --ext .ts,.tsx",
    "format": "prettier --write \"src/**/*.{ts,tsx}\" \"electron/**/*.ts\""
  }
}
```

### 7.2 electron-builderé…ç½®

```yaml
# electron-builder.yml
appId: com.health-reminder.app
productName: å¥åº·æé†’åŠ©æ‰‹
copyright: Copyright Â© 2026

directories:
  output: release
  buildResources: resources

files:
  - dist/**/*
  - electron/**/*
  - node_modules/**/*
  - package.json

# ä½¿ç”¨asaræ‰“åŒ…ï¼Œå‡å°ä½“ç§¯
asar: true

# Windowsé…ç½®
win:
  target:
    - target: nsis
      arch:
        - x64
  icon: resources/icons/icon.ico
  artifactName: ${productName}-${version}-setup.${ext}

# NSISå®‰è£…ç¨‹åºé…ç½®
nsis:
  oneClick: false                              # å…è®¸è‡ªå®šä¹‰å®‰è£…ç›®å½•
  allowToChangeInstallationDirectory: true
  allowElevation: true
  createDesktopShortcut: true
  createStartMenuShortcut: true
  shortcutName: ${productName}
  perMachine: false                            # å•ç”¨æˆ·å®‰è£…
  deleteAppDataOnUninstall: false              # å¸è½½æ—¶ä¿ç•™æ•°æ®

# æ’é™¤ä¸éœ€è¦çš„æ–‡ä»¶
asarUnpack:
  - "**/*.node"

# å‹ç¼©
compression: maximum
```

### 7.3 æ„å»ºæµç¨‹

```bash
# 1. å®‰è£…ä¾èµ–
npm install

# 2. ç±»å‹æ£€æŸ¥
npm run typecheck

# 3. ä»£ç æ£€æŸ¥
npm run lint

# 4. æ„å»º
npm run build

# 5. æ‰“åŒ…
npm run package:win

# 6. è¾“å‡º
# release/å¥åº·æé†’åŠ©æ‰‹-1.0.0-setup.exe
```

### 7.4 å®‰è£…åŒ…æµ‹è¯•æ¸…å•

- [ ] å®‰è£…ç¨‹åºèƒ½æ­£å¸¸è¿è¡Œ
- [ ] å®‰è£…åˆ°è‡ªå®šä¹‰ç›®å½•
- [ ] åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼
- [ ] åˆ›å»ºå¼€å§‹èœå•é¡¹
- [ ] é¦–æ¬¡å¯åŠ¨å¼•å¯¼æµç¨‹
- [ ] æ‰€æœ‰åŠŸèƒ½æ­£å¸¸
- [ ] å¼€æœºè‡ªå¯åŠ¨ç”Ÿæ•ˆ
- [ ] å¸è½½å¹²å‡€ï¼ˆä¿ç•™ç”¨æˆ·æ•°æ®ï¼‰

---

## 8. å¼€å‘æ—¶é—´ä¼°ç®—

### 8.1 è¯¦ç»†æ—¶é—´åˆ†è§£

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | CCæŠ€èƒ½ |
|------|------|---------|--------|
| **é˜¶æ®µ0** | é¡¹ç›®åˆå§‹åŒ– | 1å¤© | feature-dev |
| | - è„šæ‰‹æ¶æ­å»º | 4å°æ—¶ | |
| | - é…ç½®æ–‡ä»¶ | 2å°æ—¶ | |
| | - ç›®å½•ç»“æ„ | 2å°æ—¶ | |
| **é˜¶æ®µ1** | æ¶æ„è®¾è®¡ | 2å¤© | architect Agent |
| | - ç³»ç»Ÿæ¶æ„è®¾è®¡ | 1å¤© | |
| | - æ•°æ®æ¨¡å‹è®¾è®¡ | 0.5å¤© | |
| | - çŠ¶æ€ç®¡ç†æ–¹æ¡ˆ | 0.5å¤© | |
| **é˜¶æ®µ2** | UIç»„ä»¶å¼€å‘ | 3å¤© | frontend-design |
| | - åŸºç¡€ç»„ä»¶ | 0.5å¤© | |
| | - æé†’å¼¹çª— | 1å¤© | |
| | - é¦–é¡µç»Ÿè®¡ | 0.5å¤© | |
| | - è®¾ç½®é¡µé¢ | 0.5å¤© | |
| | - é¦–æ¬¡å¼•å¯¼ | 0.5å¤© | |
| **é˜¶æ®µ3** | æ ¸å¿ƒåŠŸèƒ½å¼€å‘ | 5å¤© | feature-dev |
| | - ä¸‰ä¸ªå®šæ—¶å™¨ | 2å¤© | |
| | - METè®¡ç®— | 0.5å¤© | |
| | - IPCé€šä¿¡ | 1å¤© | |
| | - ç³»ç»Ÿæ‰˜ç›˜ | 0.5å¤© | |
| | - å¼€æœºè‡ªå¯åŠ¨ | 0.5å¤© | |
| | - çª—å£ç®¡ç† | 0.5å¤© | |
| **é˜¶æ®µ4** | æ•°æ®æŒä¹…åŒ– | 2å¤© | feature-dev |
| | - æ•°æ®åº“Schema | 0.5å¤© | |
| | - æŸ¥è¯¢æ–¹æ³• | 1å¤© | |
| | - æ•°æ®è¿ç§» | 0.5å¤© | |
| **é˜¶æ®µ5** | ç³»ç»Ÿé›†æˆ | 2å¤© | executing-plans |
| | - çŠ¶æ€ç®¡ç† | 0.5å¤© | |
| | - ä¸»è¿›ç¨‹é›†æˆ | 1å¤© | |
| | - æ¸²æŸ“è¿›ç¨‹é›†æˆ | 0.5å¤© | |
| **é˜¶æ®µ6** | æµ‹è¯•ä¼˜åŒ– | 2å¤© | verification, debugging |
| | - åŠŸèƒ½æµ‹è¯• | 1å¤© | |
| | - æ€§èƒ½ä¼˜åŒ– | 0.5å¤© | |
| | - Bugä¿®å¤ | 0.5å¤© | |
| **é˜¶æ®µ7** | æ‰“åŒ…éƒ¨ç½² | 1å¤© | feature-dev |
| | - é…ç½®æ‰“åŒ… | 0.5å¤© | |
| | - æ„å»ºæµ‹è¯• | 0.5å¤© | |
| **æ€»è®¡** | | **18å¤©** | |

### 8.2 é£é™©ç¼“å†²

- æŠ€æœ¯éš¾ç‚¹é¢å¤–æ—¶é—´: +2å¤©
- Bugä¿®å¤é¢å¤–æ—¶é—´: +2å¤©
- ä¼˜åŒ–è¿­ä»£: +2å¤©

**æœ€ç»ˆä¼°ç®—**: 18å¤© + 6å¤©ç¼“å†² = **24å¤©ï¼ˆçº¦1ä¸ªæœˆï¼‰**

---

## 9. é™„å½•

### 9.1 TypeScriptç±»å‹å®šä¹‰

```typescript
// src/types/user.ts
export interface UserInfo {
  id: number;
  height: number;        // cm
  weight: number;        // kg
  age: number;
  gender: 'male' | 'female';
  dailyTarget: number;   // å¤§å¡
  initialWeight: number;
  createdAt: string;
  updatedAt: string;
}

// src/types/reminder.ts
export type ReminderType = 'exercise' | 'gaze' | 'stand';

export interface ReminderSettings {
  exercise: {
    intervalMin: number;
    intervalMax: number;
    duration: number;
    enabled: boolean;
  };
  gaze: {
    intervalMin: number;
    intervalMax: number;
    duration: number;
    enabled: boolean;
  };
  stand: {
    intervalMin: number;
    intervalMax: number;
    duration: number;
    enabled: boolean;
  };
}

// src/types/activity.ts
export interface Activity {
  id: number;
  type: ReminderType;
  name: string;
  duration: number;      // ç§’
  calories?: number;     // å¤§å¡
  metValue?: number;
  weight?: number;
  timestamp: string;
  date: string;          // YYYY-MM-DD
  completed: boolean;
}

// src/types/exercise.ts
export interface Exercise {
  id: number;
  name: string;
  metValue: number;
  intensity: 'high' | 'medium' | 'low';
  createdAt: string;
}

// src/types/stats.ts
export interface TodayStats {
  date: string;
  totalCalories: number;
  targetCalories: number;
  achieved: boolean;
  exerciseCount: number;
  gazeCount: number;
  standCount: number;
  streak: number;
}

export interface HistoryStats {
  totalCalories: number;
  totalStreak: number;
  weightChange: {
    initial: number;
    current: number;
    delta: number;
  };
}
```

### 9.2 å¸¸é‡å®šä¹‰

```typescript
// src/constants/exercises.ts
export const INITIAL_EXERCISES: Exercise[] = [
  { name: 'åŠç¨‹æ³¢æ¯”è·³', metValue: 10.0, intensity: 'high' },
  { name: 'å¼€åˆè·³', metValue: 8.0, intensity: 'high' },
  { name: 'é«˜æŠ¬è…¿', metValue: 8.0, intensity: 'high' },
  { name: 'ä¿¯å§æ’‘', metValue: 8.0, intensity: 'high' },
  { name: 'å“‘é“ƒç¡¬æ‹‰', metValue: 6.0, intensity: 'medium' },
  { name: 'ç®­æ­¥è¹²', metValue: 6.0, intensity: 'medium' },
  { name: 'æ·±è¹²', metValue: 5.0, intensity: 'medium' },
  { name: 'å¾’æ‰‹ç¡¬æ‹‰', metValue: 5.0, intensity: 'medium' },
  { name: 'å¼¹åŠ›å¸¦åˆ’èˆ¹', metValue: 4.5, intensity: 'medium' },
  { name: 'å“‘é“ƒä¾§å¹³ä¸¾', metValue: 4.0, intensity: 'medium' },
  { name: 'å“‘é“ƒå‰å¹³ä¸¾', metValue: 4.0, intensity: 'medium' },
  { name: 'ä»°å§èµ·å', metValue: 3.8, intensity: 'low' },
  { name: 'ç«™å§¿æ‰­è…°', metValue: 3.5, intensity: 'low' },
  { name: 'å¼¹åŠ›å¸¦å¼€åˆ', metValue: 3.5, intensity: 'low' },
  { name: 'å…¨èº«æ‹‰ä¼¸', metValue: 2.3, intensity: 'low' },
];

// src/constants/config.ts
export const CONFIG = {
  // é»˜è®¤æé†’è®¾ç½®
  DEFAULT_REMINDER_SETTINGS: {
    exercise: { intervalMin: 10, intervalMax: 20, duration: 120 },
    gaze: { intervalMin: 10, intervalMax: 20, duration: 60 },
    stand: { intervalMin: 10, intervalMax: 20, duration: 300 },
  },
  
  // é»˜è®¤æ¯æ—¥ç›®æ ‡
  DEFAULT_DAILY_TARGET: 300,
  
  // æœ€å°æé†’é—´éš”ï¼ˆæ¯«ç§’ï¼‰
  MIN_REMINDER_INTERVAL: 2 * 60 * 1000,
  
  // æ•°æ®åº“æ–‡ä»¶å
  DB_FILE_NAME: 'health-reminder.db',
  
  // çª—å£å°ºå¯¸
  WINDOW_SIZES: {
    main: { width: 800, height: 600 },
    settings: { width: 700, height: 500 },
    exerciseReminder: { width: 500, height: 400 },
    gazeReminder: { width: 500, height: 400 },
    standReminder: { width: 320, height: 240 },
  },
};
```

---

## ğŸ“ æ€»ç»“

### æŠ€æœ¯é€‰å‹æ€»ç»“
- âœ… Electron + React + TypeScript - æˆç†Ÿç¨³å®šï¼Œå¼€å‘æ•ˆç‡é«˜
- âœ… Tailwind CSS - è‡ªç”±åº¦é«˜ï¼Œé€‚åˆè‡ªå®šä¹‰è®¾è®¡
- âœ… Zustand - è½»é‡ç®€æ´çš„çŠ¶æ€ç®¡ç†
- âœ… SQLite - é›¶é…ç½®ï¼Œæ€§èƒ½ä¼˜ç§€
- âœ… Vite - æ„å»ºé€Ÿåº¦å¿«

### CCæŠ€èƒ½åˆ©ç”¨
- ğŸ¤– architect Agent - ç³»ç»Ÿæ¶æ„è®¾è®¡
- ğŸ¨ frontend-design - UIç»„ä»¶ç”Ÿæˆ
- âš¡ feature-dev - å¿«é€ŸåŠŸèƒ½å¼€å‘
- ğŸ“‹ æ ‡å‡†å·¥ä½œæµ - brainstorming â†’ plans â†’ execution
- ğŸ› debugging/build-error-resolver - é—®é¢˜è§£å†³
- âœ… verification - è´¨é‡ä¿è¯

### æ€§èƒ½ç›®æ ‡
- âœ… å†…å­˜å ç”¨: 60-80MBï¼ˆç›®æ ‡ < 100MBï¼‰
- âœ… å¯åŠ¨æ—¶é—´: 1-1.5ç§’ï¼ˆç›®æ ‡ < 2ç§’ï¼‰
- âœ… CPUå ç”¨: < 1%

### å¼€å‘å‘¨æœŸ
- ğŸ“… æ ¸å¿ƒå¼€å‘: 18å¤©
- ğŸ“… å«ç¼“å†²: 24å¤©ï¼ˆçº¦1ä¸ªæœˆï¼‰

---

**æ–‡æ¡£ç»“æŸ**

*æœ¬æ–‡æ¡£ä¸ºå¥åº·æé†’åŠ©æ‰‹çš„æŠ€æœ¯å®ç°æ–¹æ¡ˆï¼Œé…åˆPRDæ–‡æ¡£ä½¿ç”¨ã€‚æ‰€æœ‰CCæŠ€èƒ½æ ‡æ³¨ä¾¿äºClaude Codeç†è§£å’Œæ‰§è¡Œã€‚*
