《"灵动休息"健康助手》产品需求文档（PRD - 最终执行版 v2）

以下为您整合所有讨论要点的最终版文档，严格限定于您提出的需求，可直接用于开发。

---

## 一、 产品核心目标

开发一个 Windows 桌面程序，通过可自定义的随机提醒，强制用户定时中断久坐，执行站姿微运动与远眺。

---

## 二、 必须实现的核心功能清单

### 1. 随机提醒机制
所有提醒（久坐、运动、远眺）的间隔时间，均需在用户设置的**最小-最大分钟数**区间内**随机生成**。

---

### 2. 三大强制倒计时提醒（核心交互）

> **核心交互原则**：每个提醒窗口的核心交互均为**全屏倒计时**。

| 提醒类型 | 倒计时内容与时长 | 关键规则 |
|---------|-----------------|----------|
| **强制站立** | 显示"请站立" + **个性化时长倒计时**（如 02:30） | 时长由身体参数计算（1.5-3分钟）。**窗口置顶，无法关闭，必须等计时归零。** |
| **微运动** | 显示当前"动作名称" + **该动作预设时长倒计时**（如 开合跳 00:30） | 一个动作计时结束，自动切换下一个动作。用户可"跳过"，但会触发**连续跳过惩罚机制**。 |
| **强制远眺** | 显示"请远眺20秒外" + **固定60秒倒计时** | **窗口置顶，无法关闭，必须等计时归零。** 可配置背景音乐。 |

---

### 3. 动作库管理
- 用户可**新增/编辑/删除**动作，输入名称、时长、MET值
- 提供内置常见动作 MET 值参考表（见下文），供用户新增时选用
- 可创建多套自定义运动方案

---

### 4. 基于 MET 值的热量估算
使用公式：`消耗热量 = MET值 × 体重(kg) × 时长(小时) × 0.85`

---

### 5. 连续跳过惩罚机制
用户连续跳过微运动达设定次数（如 2 次）后，下次提醒弹窗将：
- 变为**超大尺寸**（全屏 80%）
- **强制置顶**（无法切换窗口）
- 必须**手动点击"确认完成"**或等待结束才能关闭

---

### 6. 数据记录与图表
本地记录站立时长/次数、运动热量、手动输入的体重，并生成趋势图表。

---

### 7. 音效与语音定制（可选）
- 可替换各类提示音效
- 可配置外部 TTS API，实现**倒计时最后5秒语音播报**（"5, 4, 3, 2, 1"）
- 可为远眺环节设置背景音乐
- 在每个动作**倒计时开始/结束时**，播放短促提示音

---

## 三、 辅助信息：内置 MET 值参考表

| 动作强度 | 动作名称示例 | 推荐MET值 |
|---------|-------------|----------|
| **低强度** | 原地踏步、靠墙静蹲、手臂画圈 | 3.5 |
| **中等强度** | 开合跳、自重深蹲、高抬腿 | 5.0 |
| **中高强度** | 简化波比跳、登山跑 | 7.0 |
| **小器械** | 哑铃推举、弹力绳划船 | 4.0 |

---

## 四、 开发必要说明

### 数据本地存储
所有数据（设置、动作库、记录）必须存储在用户本地。

### 技术栈建议
- **Python + PySide6 + SQLite** 组合
- PySide6 用于桌面 GUI
- SQLite 用于数据管理
- matplotlib 用于统计图表

---

## 五、 交互设计要点补充

### 全屏倒计时弹窗规范
```
┌────────────────────────────────────────┐
│                                        │
│           ⏰ 请站立休息 ⏰            │
│                                        │
│          倒计时: 02:30                 │
│                                        │
│      （大字体，全屏居中，置顶）        │
│                                        │
│     无跳过按钮，无关闭按钮             │
│     必须等待计时归零                   │
│                                        │
└────────────────────────────────────────┘
```

### 微运动弹窗规范
```
┌────────────────────────────────────────┐
│         🏃 微运动时间 🏃              │
│                                        │
│       动作: 开合跳                     │
│       时长: 30 秒                      │
│                                        │
│       倒计时: 00:30                   │
│                                        │
│   [完成]  [跳过]  [换一个]            │
│                                        │
│  MET: 5.0 | 热量: XX 千卡             │
└────────────────────────────────────────┘
```

---

**版本**：v2（补充倒计时核心交互说明）
**更新日期**：2026-01-26
