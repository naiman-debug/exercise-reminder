# DESIGN-IxD-001 交互设计文档

**项目**："灵动休息"健康助手
**版本**：v1.0
**日期**：2026-01-26
**设计者**：Claude Code

---

## 一、 设计原则

### 1.1 核心原则
- **强制但友好**：强制休息，但不让用户产生反感
- **简单直观**：所有交互在 3 秒内可理解
- **最小干扰**：提醒清晰明确，完成后立即消失
- **正反馈**：完成动作后给予即时反馈

### 1.2 设计目标
- 解决久坐问题，培养健康习惯
- 最小化学习成本，开箱即用
- 提供足够定制性，满足不同需求

---

## 二、 用户旅程

### 2.1 首次使用流程

```
启动应用
    ↓
设置引导（体重、目标）
    ↓
配置提醒间隔（默认推荐值）
    ↓
选择运动方案（默认推荐）
    ↓
完成，开始运行
```

### 2.2 日常使用流程

```
系统托盘常驻
    ↓
定时触发提醒（随机间隔）
    ↓
全屏倒计时弹窗
    ↓
用户完成动作 / 等待结束
    ↓
弹窗关闭，记录数据
    ↓
继续工作，等待下次提醒
```

### 2.3 惩罚机制触发流程

```
用户跳过微运动
    ↓
记录跳过次数 +1
    ↓
连续跳过 >= 设定值？
    ├─ 否 → 正常提醒
    └─ 是 → 超大强制弹窗
```

---

## 三、 核心交互设计

### 3.1 系统托盘交互

| 图标状态 | 含义 | 点击行为 |
|---------|------|---------|
| 🟢 绿色 | 正常运行 | 显示菜单 |
| 🟡 黄色 | 即将提醒（30秒内） | 显示菜单 |
| 🔴 红色 | 惩罚模式激活 | 显示菜单 |

**托盘菜单**：
```
┌─────────────────────┐
│  灵动休息           │
├─────────────────────┤
│  📊 查看统计        │
│  ⚙️  设置           │
│  📋 动作库管理      │
├─────────────────────┤
│  ⏸️  暂停提醒 (1小时)│
│  ▶️  恢复提醒       │
├─────────────────────┤
│  ❌ 退出            │
└─────────────────────┘
```

### 3.2 强制站立弹窗

**设计规范**：
- 尺寸：全屏 60%
- 位置：屏幕正中央
- 字体：超大号（72pt+）
- 置顶：强制置顶（StayOnTop）
- 关闭：无关闭按钮，无跳过按钮

**交互流程**：
```
弹窗出现（淡入动画 0.3s）
    ↓
倒计时开始（大字体显示）
    ↓
可选：播放提示音
    ↓
倒计时进行中...
    ↓
倒计时归零
    ↓
显示"完成"反馈（0.5s）
    ↓
弹窗消失（淡出动画 0.3s）
```

**倒计时格式**：
```
   MM:SS  或  SS 秒
   02:30      90 秒
```

### 3.3 微运动弹窗

**设计规范**：
- 尺寸：800 x 600 px（默认）/ 全屏 80%（惩罚模式）
- 位置：屏幕中央
- 字体：动作名称 48pt，倒计时 60pt
- 按钮：大按钮（120 x 50 px），易点击

**交互流程**：
```
弹窗出现（淡入动画 0.3s）
    ↓
显示当前动作 + 倒计时
    ↓
用户选择：
    ├─ [完成] → 记录数据 → 关闭弹窗
    ├─ [跳过] → 记录跳过 → 关闭弹窗
    └─ [换一个] → 随机切换动作
    ↓
动作序列完成？
    ├─ 是 → 关闭弹窗
    └─ 否 → 显示下一个动作
```

**按钮状态**：
| 按钮 | 正常模式 | 惩罚模式 |
|-----|---------|---------|
| 完成 | ✅ 可用 | ✅ 可用 |
| 跳过 | ✅ 可用 | ❌ 禁用 |
| 换一个 | ✅ 可用 | ❌ 禁用 |

### 3.4 强制远眺弹窗

**设计规范**：
- 尺寸：全屏 50%
- 位置：屏幕中央
- 背景：可选显示放松图片/渐变
- 倒计时：固定 60 秒

**特殊交互**：
- 可配置背景音乐（用户可选）
- 音乐与倒计时同步结束
- 倒计时最后 10 秒可配置语音播报

---

## 四、 设置界面交互

### 4.1 设置主界面结构

```
┌─────────────────────────────────────────────┐
│  设置                              [_][□][X] │
├─────────────────────────────────────────────┤
│  [ General ] [ Reminder ] [ Exercise ]      │
│  [ Audio ]   [ Statistics ] [ About ]       │
├─────────────────────────────────────────────┤
│                                             │
│              (当前选中页面的内容)            │
│                                             │
│                                             │
├─────────────────────────────────────────────┤
│              [ 应用 ]  [ 取消 ]             │
└─────────────────────────────────────────────┘
```

### 4.2 提醒设置页

**输入控件设计**：
```
强制站立提醒
├─ 间隔范围：[ 30 ] - [ 60 ] 分钟
├─ 倒计时时长：[ 90 ] 秒（1.5-3分钟）
└─ 启用：[✓]

微运动提醒
├─ 间隔范围：[ 45 ] - [ 75 ] 分钟
├─ 每次动作数：[ 3 ] - [ 5 ] 个
└─ 启用：[✓]

强制远眺提醒
├─ 间隔范围：[ 60 ] - [ 90 ] 分钟
├─ 倒计时时长：60 秒（固定）
└─ 启用：[✓]

惩罚机制
├─ 连续跳过触发次数：[ 2 ] 次
└─ 启用：[✓]
```

### 4.3 动作库管理页

**列表交互**：
```
┌─────────────────────────────────────────────────┐
│  [+ 新增动作]  [导入]  [导出]                    │
├──────────┬──────────┬──────────┬────────────────┤
│  动作名  │   时长   │  MET值  │     操作       │
├──────────┼──────────┼──────────┼────────────────┤
│  开合跳  │  30 秒   │   5.0   │ [编辑][删除]   │
│  深蹲    │  45 秒   │   5.0   │ [编辑][删除]   │
│  ...     │   ...    │   ...   │      ...       │
└──────────┴──────────┴──────────┴────────────────┘
```

**新增/编辑动作弹窗**：
```
┌─────────────────────────────────┐
│  新增动作           [_][□][X]   │
├─────────────────────────────────┤
│  动作名称：[________________]   │
│  时长（秒）：[_____]            │
│  MET值：[_____]                 │
│  分类：[下拉选择 ▼]             │
│                                 │
│  MET参考：                       │
│  • 低强度：3.5                  │
│  • 中等强度：5.0                │
│  • 中高强度：7.0                │
│  • 小器械：4.0                  │
│                                 │
│         [ 确定 ]  [ 取消 ]      │
└─────────────────────────────────┘
```

---

## 五、 反馈设计

### 5.1 即时反馈

| 动作 | 反馈 | 时长 |
|------|------|------|
| 完成站立 | ✓ 绿色对勾动画 | 0.5s |
| 完成运动 | ✓ 绿色对勾 + 热量显示 | 1s |
| 完成远眺 | ✓ 绿色对勾动画 | 0.5s |
| 跳过运动 | ⚠️ 黄色警告 | 0.3s |
| 触发惩罚 | 🔴 红色提示 | 1s |

### 5.2 声音反馈

| 时机 | 声音类型 | 可配置 |
|------|---------|--------|
| 弹窗出现 | 提示音 | ✓ |
| 倒计时结束 | 完成音 | ✓ |
| 最后5秒 | 语音倒计时 | ✓ |
| 完成动作 | 成功音 | ✓ |
| 跳过动作 | 警告音 | ✓ |

### 5.3 视觉反馈

**倒计时颜色变化**：
```
> 50% 时间：绿色
30-50% 时间：黄色
< 30% 时间：红色
最后 10 秒：闪烁动画
```

**进度指示**：
```
┌────────────────────────────────────┐
│                                    │
│         倒计时: 00:15              │
│                                    │
│   ▓▓▓▓▓▓▓▓▓▓░░░░░░░░░░░░░░░░      │
│   50% 已完成                       │
└────────────────────────────────────┘
```

---

## 六、 边界情况处理

### 6.1 全屏应用冲突

**问题**：用户正在使用全屏应用（游戏、视频）

**解决方案**：
- 检测到全屏应用时，延迟提醒
- 托盘图标闪烁提示
- 用户退出全屏后立即提醒

### 6.2 系统休眠/唤醒

**处理**：
- 系统休眠时暂停所有定时器
- 唤醒后重置下次提醒时间
- 记录休眠时段，不影响统计

### 6.3 连续跳过累计

**逻辑**：
```
跳过次数在每日 00:00 重置
连续跳过 >= 2 次 → 触发惩罚
完成一次运动 → 重置跳过次数
```

### 6.4 应用最小化

**行为**：
- 提醒触发时自动恢复窗口
- 系统托盘图标闪烁
- 播放提示音（如果启用）

---

## 七、 可访问性设计

### 7.1 键盘导航

| 快捷键 | 功能 |
|--------|------|
| Ctrl+S | 打开设置 |
| Ctrl+Q | 退出应用 |
| Space | 完成/跳过（当弹窗激活时） |
| Esc | 无效（强制弹窗无法关闭） |

### 7.2 高对比度模式

支持 Windows 高对比度模式，自动适配颜色。

### 7.3 字体缩放

支持 Windows DPI 缩放（125%, 150%, 200%）。

---

## 八、 动画设计

### 8.1 弹窗动画

```css
淡入：opacity 0 → 1，duration 0.3s
淡出：opacity 1 → 0，duration 0.3s
缩放：scale 0.9 → 1.0，duration 0.2s（弹窗出现时）
```

### 8.2 倒计时动画

**最后 10 秒闪烁**：
```css
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}
animation: pulse 1s infinite;
```

**数字切换动画**：
```css
@keyframes slideDown {
  from { transform: translateY(-100%); }
  to { transform: translateY(0); }
}
```

---

## 九、 交互状态机

### 9.1 应用状态

```
初始设置 → 运行中 → 暂停 → 退出
   ↑___________↓
```

### 9.2 提醒状态

```
空闲 → 触发提醒 → 显示弹窗 → 倒计时中 → 完成/跳过 → 空闲
                              ↓
                          惩罚模式
```

---

**文档版本**：v1.0
**最后更新**：2026-01-26
